(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{"2lpH":function(t,e){t.exports=n;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(b){}function n(t,e,r){this.low=0|t,this.high=0|e,this.unsigned=!!r}function o(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=o;var i={},s={};function u(t,e){var r,n,o;return e?(o=0<=(t>>>=0)&&t<256)&&(n=s[t])?n:(r=c(t,(0|t)<0?-1:0,!0),o&&(s[t]=r),r):(o=-128<=(t|=0)&&t<128)&&(n=i[t])?n:(r=c(t,t<0?-1:0,!1),o&&(i[t]=r),r)}function a(t,e){if(isNaN(t))return e?A:g;if(e){if(t<0)return A;if(t>=l)return _}else{if(t<=-v)return I;if(t+1>=v)return R}return t<0?a(-t,e).neg():c(t%p|0,t/p|0,e)}function c(t,e,r){return new n(t,e,r)}n.fromInt=u,n.fromNumber=a,n.fromBits=c;var h=Math.pow;function d(t,e,r){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return g;if("number"===typeof e?(r=e,e=!1):e=!!e,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return d(t.substring(1),e,r).neg();for(var o=a(h(r,8)),i=g,s=0;s<t.length;s+=8){var u=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+u),r);if(u<8){var f=a(h(r,u));i=i.mul(f).add(a(c))}else i=(i=i.mul(o)).add(a(c))}return i.unsigned=e,i}function f(t,e){return"number"===typeof t?a(t,e):"string"===typeof t?d(t,e):c(t.low,t.high,"boolean"===typeof e?e:t.unsigned)}n.fromString=d,n.fromValue=f;var p=4294967296,l=p*p,v=l/2,y=u(1<<24),g=u(0);n.ZERO=g;var A=u(0,!0);n.UZERO=A;var m=u(1);n.ONE=m;var E=u(1,!0);n.UONE=E;var w=u(-1);n.NEG_ONE=w;var R=c(-1,2147483647,!1);n.MAX_VALUE=R;var _=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=_;var I=c(0,-2147483648,!1);n.MIN_VALUE=I;var T=n.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},T.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(I)){var e=a(t),r=this.div(e),n=r.mul(e).sub(this);return r.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var o=a(h(t,6),this.unsigned),i=this,s="";;){var u=i.div(o),c=(i.sub(u.mul(o)).toInt()>>>0).toString(t);if((i=u).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1===(1&this.low)},T.isEven=function(){return 0===(1&this.low)},T.equals=function(t){return o(t)||(t=f(t)),(this.unsigned===t.unsigned||this.high>>>31!==1||t.high>>>31!==1)&&(this.high===t.high&&this.low===t.low)},T.eq=T.equals,T.notEquals=function(t){return!this.eq(t)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(t){return this.comp(t)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(t){return this.comp(t)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(t){return this.comp(t)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(t){return this.comp(t)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(t){if(o(t)||(t=f(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(m)},T.neg=T.negate,T.add=function(t){o(t)||(t=f(t));var e=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,s=t.high>>>16,u=65535&t.high,a=t.low>>>16,h=0,d=0,p=0,l=0;return p+=(l+=i+(65535&t.low))>>>16,d+=(p+=n+a)>>>16,h+=(d+=r+u)>>>16,h+=e+s,c((p&=65535)<<16|(l&=65535),(h&=65535)<<16|(d&=65535),this.unsigned)},T.subtract=function(t){return o(t)||(t=f(t)),this.add(t.neg())},T.sub=T.subtract,T.multiply=function(t){if(this.isZero())return g;if(o(t)||(t=f(t)),r)return c(r.mul(this.low,this.high,t.low,t.high),r.get_high(),this.unsigned);if(t.isZero())return g;if(this.eq(I))return t.isOdd()?I:g;if(t.eq(I))return this.isOdd()?I:g;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(y)&&t.lt(y))return a(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,u=t.high>>>16,h=65535&t.high,d=t.low>>>16,p=65535&t.low,l=0,v=0,A=0,m=0;return A+=(m+=s*p)>>>16,v+=(A+=i*p)>>>16,A&=65535,v+=(A+=s*d)>>>16,l+=(v+=n*p)>>>16,v&=65535,l+=(v+=i*d)>>>16,v&=65535,l+=(v+=s*h)>>>16,l+=e*p+n*d+i*h+s*u,c((A&=65535)<<16|(m&=65535),(l&=65535)<<16|(v&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(t){if(o(t)||(t=f(t)),t.isZero())throw Error("division by zero");var e,n,i;if(r)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?c((this.unsigned?r.div_u:r.div_s)(this.low,this.high,t.low,t.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?A:g;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return A;if(t.gt(this.shru(1)))return E;i=A}else{if(this.eq(I))return t.eq(m)||t.eq(w)?I:t.eq(I)?m:(e=this.shr(1).div(t).shl(1)).eq(g)?t.isNegative()?m:w:(n=this.sub(t.mul(e)),i=e.add(n.div(t)));if(t.eq(I))return this.unsigned?A:g;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=g}for(n=this;n.gte(t);){e=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(e)/Math.LN2),u=s<=48?1:h(2,s-48),d=a(e),p=d.mul(t);p.isNegative()||p.gt(n);)p=(d=a(e-=u,this.unsigned)).mul(t);d.isZero()&&(d=m),i=i.add(d),n=n.sub(p)}return i},T.div=T.divide,T.modulo=function(t){return o(t)||(t=f(t)),r?c((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,t.low,t.high),r.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return c(~this.low,~this.high,this.unsigned)},T.and=function(t){return o(t)||(t=f(t)),c(this.low&t.low,this.high&t.high,this.unsigned)},T.or=function(t){return o(t)||(t=f(t)),c(this.low|t.low,this.high|t.high,this.unsigned)},T.xor=function(t){return o(t)||(t=f(t)),c(this.low^t.low,this.high^t.high,this.unsigned)},T.shiftLeft=function(t){return o(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?c(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):c(0,this.low<<t-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(t){return o(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?c(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):c(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(t){if(o(t)&&(t=t.toInt()),0===(t&=63))return this;var e=this.high;return t<32?c(this.low>>>t|e<<32-t,e>>>t,this.unsigned):c(32===t?e:e>>>t-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},T.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},T.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},"49sm":function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},H7XF:function(t,e,r){"use strict";e.byteLength=function(t){var e=c(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=c(t),s=n[0],u=n[1],a=new i(function(t,e,r){return 3*(e+r)/4-r}(0,s,u)),h=0,d=u>0?s-4:s;for(r=0;r<d;r+=4)e=o[t.charCodeAt(r)]<<18|o[t.charCodeAt(r+1)]<<12|o[t.charCodeAt(r+2)]<<6|o[t.charCodeAt(r+3)],a[h++]=e>>16&255,a[h++]=e>>8&255,a[h++]=255&e;2===u&&(e=o[t.charCodeAt(r)]<<2|o[t.charCodeAt(r+1)]>>4,a[h++]=255&e);1===u&&(e=o[t.charCodeAt(r)]<<10|o[t.charCodeAt(r+1)]<<4|o[t.charCodeAt(r+2)]>>2,a[h++]=e>>8&255,a[h++]=255&e);return a},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],s=16383,u=0,a=r-o;u<a;u+=s)i.push(h(t,u,u+s>a?a:u+s));1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,a=s.length;u<a;++u)n[u]=s[u],o[s.charCodeAt(u)]=u;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function h(t,e,r){for(var o,i,s=[],u=e;u<r;u+=3)o=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},HDXh:function(t,e,r){"use strict";(function(t){var n=r("H7XF"),o=r("kVK+"),i=r("49sm");function s(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=a.prototype:(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,r){if(!a.TYPED_ARRAY_SUPPORT&&!(this instanceof a))return new a(t,e,r);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return c(this,t,e,r)}function c(t,e,r,n){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);a.TYPED_ARRAY_SUPPORT?(t=e).__proto__=a.prototype:t=f(t,e);return t}(t,e,r,n):"string"===typeof e?function(t,e,r){"string"===typeof r&&""!==r||(r="utf8");if(!a.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|l(e,r),o=(t=u(t,n)).write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(a.isBuffer(e)){var r=0|p(e.length);return 0===(t=u(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(n=e.length)!==n?u(t,0):f(t,e);if("Buffer"===e.type&&i(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(h(e),t=u(t,e<0?0:0|p(e)),!a.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|p(e.length);t=u(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function l(t,e){if(a.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(t).length;default:if(n)return q(t).length;e=(""+e).toLowerCase(),n=!0}}function v(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return b(this,e,r);case"ascii":return N(this,e,r);case"latin1":case"binary":return P(this,e,r);case"base64":return T(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,o){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"===typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:A(t,e,r,n,o);if("number"===typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):A(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function A(t,e,r,n,o){var i,s=1,u=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,u/=2,a/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var h=-1;for(i=r;i<u;i++)if(c(t,i)===c(e,-1===h?0:i-h)){if(-1===h&&(h=i),i-h+1===a)return h*s}else-1!==h&&(i-=i-h),h=-1}else for(r+a>u&&(r=u-a),i=r;i>=0;i--){for(var d=!0,f=0;f<a;f++)if(c(t,i+f)!==c(e,f)){d=!1;break}if(d)return i}return-1}function m(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var u=parseInt(e.substr(2*s,2),16);if(isNaN(u))return s;t[r+s]=u}return s}function E(t,e,r,n){return W(q(e,t.length-r),t,r,n)}function w(t,e,r,n){return W(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function R(t,e,r,n){return w(t,e,r,n)}function _(t,e,r,n){return W(V(e),t,r,n)}function I(t,e,r,n){return W(function(t,e){for(var r,n,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function T(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function b(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,s,u,a,c=t[o],h=null,d=c>239?4:c>223?3:c>191?2:1;if(o+d<=r)switch(d){case 1:c<128&&(h=c);break;case 2:128===(192&(i=t[o+1]))&&(a=(31&c)<<6|63&i)>127&&(h=a);break;case 3:i=t[o+1],s=t[o+2],128===(192&i)&&128===(192&s)&&(a=(15&c)<<12|(63&i)<<6|63&s)>2047&&(a<55296||a>57343)&&(h=a);break;case 4:i=t[o+1],s=t[o+2],u=t[o+3],128===(192&i)&&128===(192&s)&&128===(192&u)&&(a=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&u)>65535&&a<1114112&&(h=a)}null===h?(h=65533,d=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),o+=d}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=O));return r}(n)}e.Buffer=a,e.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=s(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,r){return c(null,t,e,r)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,r){return function(t,e,r,n){return h(e),e<=0?u(t,e):void 0!==r?"string"===typeof n?u(t,e).fill(r,n):u(t,e).fill(r):u(t,e)}(null,t,e,r)},a.allocUnsafe=function(t){return d(null,t)},a.allocUnsafeSlow=function(t){return d(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=a.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var s=t[r];if(!a.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},a.byteLength=l,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?b(this,0,t):v.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,r,n,o){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),u=Math.min(i,s),c=this.slice(n,o),h=t.slice(e,r),d=0;d<u;++d)if(c[d]!==h[d]){i=c[d],s=h[d];break}return i<s?-1:s<i?1:0},a.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},a.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},a.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},a.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return m(this,t,e,r);case"utf8":case"utf-8":return E(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return R(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function N(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function P(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function U(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=j(t[i]);return o}function S(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function C(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,r,n,o,i){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function k(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function L(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function M(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(t,e,r,n,i){return i||M(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function x(t,e,r,n,i){return i||M(t,0,r,8),o.write(t,e,r,n,52,8),r+8}a.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),a.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=a.prototype;else{var o=e-t;r=new a(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},a.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||C(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},a.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||C(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},a.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||C(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},a.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||C(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},a.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),o.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),o.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),o.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),o.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||D(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},a.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||D(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},a.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);D(this,t,e,r,o-1,-o)}var i=0,s=1,u=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/s>>0)-u&255;return e+r},a.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);D(this,t,e,r,o-1,-o)}var i=r-1,s=1,u=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/s>>0)-u&255;return e+r},a.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,r){return F(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return F(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return x(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return x(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!a.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},a.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(i=e;i<r;++i)this[i]=t;else{var s=a.isBuffer(t)?t:q(new a(t,n).toString()),u=s.length;for(i=0;i<r-e;++i)this[i+e]=s[i%u]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function q(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function V(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function W(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}}).call(this,r("yLpj"))},K64n:function(t,e,r){"use strict";e.Headers=self.Headers,e.Request=self.Request,e.Response=self.Response,e.fetch=self.fetch},SjWX:function(t,e,r){(function(e){function r(t){var e=i([["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]]).filter((function(e){return e.rule&&e.rule.test(t)}))[0];return e?e.name:null}function n(){return"undefined"!==typeof e&&e.version&&{name:"node",version:e.version.slice(1),os:e.platform}}function o(t){var e=i([["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/]]);if(!t)return null;var n=e.map((function(e){var r=e.rule.exec(t),n=r&&r[1].split(/[._]/).slice(0,3);return n&&n.length<3&&(n=n.concat(1==n.length?[0,0]:[0])),r&&{name:e.name,version:n.join(".")}})).filter(Boolean)[0]||null;return n&&(n.os=r(t)),/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/i.test(t)&&((n=n||{}).bot=!0),n}function i(t){return t.map((function(t){return{name:t[0],rule:t[1]}}))}t.exports={detect:function(){return"undefined"!==typeof navigator?o(navigator.userAgent):n()},detectOS:r,getNodeVersion:n,parseUserAgent:o}}).call(this,r("8oxB"))},kGnn:function(t,e,r){"use strict";r.r(e),r.d(e,"AnonymousAuthProvider",(function(){return Y})),r.d(e,"AnonymousCredential",(function(){return Pt})),r.d(e,"BSON",(function(){return o.b})),r.d(e,"BrowserFetchTransport",(function(){return Je})),r.d(e,"CustomAuthProvider",(function(){return Ut})),r.d(e,"CustomCredential",(function(){return Ct})),r.d(e,"FacebookAuthProvider",(function(){return Dt})),r.d(e,"FacebookCredential",(function(){return Lt})),r.d(e,"FacebookRedirectCredential",(function(){return Be})),r.d(e,"FunctionAuthProvider",(function(){return Mt})),r.d(e,"FunctionCredential",(function(){return Ft})),r.d(e,"GoogleAuthProvider",(function(){return xt})),r.d(e,"GoogleCredential",(function(){return jt})),r.d(e,"GoogleRedirectCredential",(function(){return je})),r.d(e,"MemoryStorage",(function(){return ae})),r.d(e,"ServerApiKeyAuthProvider",(function(){return qt})),r.d(e,"ServerApiKeyCredential",(function(){return Wt})),r.d(e,"Stitch",(function(){return _r})),r.d(e,"StitchAppClientConfiguration",(function(){return Me})),r.d(e,"StitchAppClientInfo",(function(){return xe})),r.d(e,"StitchClientError",(function(){return x})),r.d(e,"StitchClientErrorCode",(function(){return C})),r.d(e,"StitchRequestError",(function(){return l})),r.d(e,"StitchRequestErrorCode",(function(){return c})),r.d(e,"StitchServiceError",(function(){return E})),r.d(e,"StitchServiceErrorCode",(function(){return d})),r.d(e,"StitchUserIdentity",(function(){return it})),r.d(e,"Stream",(function(){return q})),r.d(e,"UserApiKey",(function(){return Ht})),r.d(e,"UserApiKeyAuthProvider",(function(){return Gt})),r.d(e,"UserApiKeyAuthProviderClient",(function(){return Fe})),r.d(e,"UserApiKeyCredential",(function(){return Qt})),r.d(e,"UserPasswordAuthProvider",(function(){return te})),r.d(e,"UserPasswordAuthProviderClient",(function(){return We})),r.d(e,"UserPasswordCredential",(function(){return ie})),r.d(e,"UserType",(function(){return ue})),r.d(e,"RemoteInsertManyResult",(function(){return Dr})),r.d(e,"RemoteMongoReadOperation",(function(){return Xr})),r.d(e,"RemoteMongoClient",(function(){return jr}));var n,o=r("no5z");!function(t){t[t.ActiveUserChanged=0]="ActiveUserChanged",t[t.ListenerRegistered=1]="ListenerRegistered",t[t.UserAdded=2]="UserAdded",t[t.UserLinked=3]="UserLinked",t[t.UserLoggedIn=4]="UserLoggedIn",t[t.UserLoggedOut=5]="UserLoggedOut",t[t.UserRemoved=6]="UserRemoved"}(n||(n={}));var i=function(){function t(t,e,r,n,o,i,s,u){this.userId=t,this.deviceId=e,this.accessToken=r,this.refreshToken=n,this.loggedInProviderType=o,this.loggedInProviderName=i,this.lastAuthActivity=s,this.userProfile=u}return t.empty=function(){return new t(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)},Object.defineProperty(t.prototype,"hasUser",{get:function(){return void 0!==this.userId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return void 0===this.deviceId},enumerable:!0,configurable:!0}),t.prototype.loggedOut=function(){return new t(this.userId,this.deviceId,void 0,void 0,this.loggedInProviderType,this.loggedInProviderName,new Date,this.userProfile)},t.prototype.withClearedUser=function(){return new t(void 0,this.deviceId,void 0,void 0,void 0,void 0,void 0,void 0)},t.prototype.withAuthProvider=function(e,r){return new t(this.userId,this.deviceId,this.accessToken,this.refreshToken,e,r,new Date,this.userProfile)},t.prototype.withNewAuthActivityTime=function(){return new t(this.userId,this.deviceId,this.accessToken,this.refreshToken,this.loggedInProviderType,this.loggedInProviderName,new Date,this.userProfile)},Object.defineProperty(t.prototype,"isLoggedIn",{get:function(){return void 0!==this.accessToken&&void 0!==this.refreshToken},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){return new t(void 0===e.userId?this.userId:e.userId,void 0===e.deviceId?this.deviceId:e.deviceId,void 0===e.accessToken?this.accessToken:e.accessToken,void 0===e.refreshToken?this.refreshToken:e.refreshToken,void 0===e.loggedInProviderType?this.loggedInProviderType:e.loggedInProviderType,void 0===e.loggedInProviderName?this.loggedInProviderName:e.loggedInProviderName,void 0===e.lastAuthActivity?this.lastAuthActivity:e.lastAuthActivity,void 0===e.userProfile?this.userProfile:e.userProfile)},t}(),s=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u=function(t){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this),this.message=t,this.name=this.constructor.name};u.prototype=Object.create(Error.prototype);var a,c,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(u);!function(t){t[t.TRANSPORT_ERROR=0]="TRANSPORT_ERROR",t[t.DECODING_ERROR=1]="DECODING_ERROR",t[t.ENCODING_ERROR=2]="ENCODING_ERROR"}(c||(c={}));var d,f=((a={})[c.TRANSPORT_ERROR]="the request transport encountered an error communicating with Stitch",a[c.DECODING_ERROR]="an error occurred while decoding a response from Stitch",a[c.ENCODING_ERROR]="an error occurred while encoding a request for Stitch",a),p=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),l=function(t){function e(e,r){var n=this,o="("+c[r]+"): "+f[r]+": "+e.message;return(n=t.call(this,o)||this).underlyingError=e,n.errorCode=r,n.errorCodeName=c[r],n}return p(e,t),e}(h);!function(t){t[t.MissingAuthReq=0]="MissingAuthReq",t[t.InvalidSession=1]="InvalidSession",t[t.UserAppDomainMismatch=2]="UserAppDomainMismatch",t[t.DomainNotAllowed=3]="DomainNotAllowed",t[t.ReadSizeLimitExceeded=4]="ReadSizeLimitExceeded",t[t.InvalidParameter=5]="InvalidParameter",t[t.MissingParameter=6]="MissingParameter",t[t.TwilioError=7]="TwilioError",t[t.GCMError=8]="GCMError",t[t.HTTPError=9]="HTTPError",t[t.AWSError=10]="AWSError",t[t.MongoDBError=11]="MongoDBError",t[t.ArgumentsNotAllowed=12]="ArgumentsNotAllowed",t[t.FunctionExecutionError=13]="FunctionExecutionError",t[t.NoMatchingRuleFound=14]="NoMatchingRuleFound",t[t.InternalServerError=15]="InternalServerError",t[t.AuthProviderNotFound=16]="AuthProviderNotFound",t[t.AuthProviderAlreadyExists=17]="AuthProviderAlreadyExists",t[t.ServiceNotFound=18]="ServiceNotFound",t[t.ServiceTypeNotFound=19]="ServiceTypeNotFound",t[t.ServiceAlreadyExists=20]="ServiceAlreadyExists",t[t.ServiceCommandNotFound=21]="ServiceCommandNotFound",t[t.ValueNotFound=22]="ValueNotFound",t[t.ValueAlreadyExists=23]="ValueAlreadyExists",t[t.ValueDuplicateName=24]="ValueDuplicateName",t[t.FunctionNotFound=25]="FunctionNotFound",t[t.FunctionAlreadyExists=26]="FunctionAlreadyExists",t[t.FunctionDuplicateName=27]="FunctionDuplicateName",t[t.FunctionSyntaxError=28]="FunctionSyntaxError",t[t.FunctionInvalid=29]="FunctionInvalid",t[t.IncomingWebhookNotFound=30]="IncomingWebhookNotFound",t[t.IncomingWebhookAlreadyExists=31]="IncomingWebhookAlreadyExists",t[t.IncomingWebhookDuplicateName=32]="IncomingWebhookDuplicateName",t[t.RuleNotFound=33]="RuleNotFound",t[t.ApiKeyNotFound=34]="ApiKeyNotFound",t[t.RuleAlreadyExists=35]="RuleAlreadyExists",t[t.RuleDuplicateName=36]="RuleDuplicateName",t[t.AuthProviderDuplicateName=37]="AuthProviderDuplicateName",t[t.RestrictedHost=38]="RestrictedHost",t[t.ApiKeyAlreadyExists=39]="ApiKeyAlreadyExists",t[t.IncomingWebhookAuthFailed=40]="IncomingWebhookAuthFailed",t[t.ExecutionTimeLimitExceeded=41]="ExecutionTimeLimitExceeded",t[t.FunctionNotCallable=42]="FunctionNotCallable",t[t.UserAlreadyConfirmed=43]="UserAlreadyConfirmed",t[t.UserNotFound=44]="UserNotFound",t[t.UserDisabled=45]="UserDisabled",t[t.Unknown=46]="Unknown"}(d||(d={}));var v={APIKeyAlreadyExists:d.ApiKeyAlreadyExists,APIKeyNotFound:d.ApiKeyNotFound,AWSError:d.AWSError,ArgumentsNotAllowed:d.ArgumentsNotAllowed,AuthProviderAlreadyExists:d.AuthProviderAlreadyExists,AuthProviderDuplicateName:d.AuthProviderDuplicateName,AuthProviderNotFound:d.AuthProviderNotFound,DomainNotAllowed:d.DomainNotAllowed,ExecutionTimeLimitExceeded:d.ExecutionTimeLimitExceeded,FunctionAlreadyExists:d.FunctionAlreadyExists,FunctionDuplicateName:d.FunctionDuplicateName,FunctionExecutionError:d.FunctionExecutionError,FunctionInvalid:d.FunctionInvalid,FunctionNotCallable:d.FunctionNotCallable,FunctionNotFound:d.FunctionNotFound,FunctionSyntaxError:d.FunctionSyntaxError,GCMError:d.GCMError,HTTPError:d.HTTPError,IncomingWebhookAlreadyExists:d.IncomingWebhookAlreadyExists,IncomingWebhookAuthFailed:d.IncomingWebhookAuthFailed,IncomingWebhookDuplicateName:d.IncomingWebhookDuplicateName,IncomingWebhookNotFound:d.IncomingWebhookNotFound,InternalServerError:d.InternalServerError,InvalidParameter:d.InvalidParameter,InvalidSession:d.InvalidSession,MissingAuthReq:d.MissingAuthReq,MissingParameter:d.MissingParameter,MongoDBError:d.MongoDBError,NoMatchingRuleFound:d.NoMatchingRuleFound,ReadSizeLimitExceeded:d.ReadSizeLimitExceeded,RestrictedHost:d.RestrictedHost,RuleAlreadyExists:d.RuleAlreadyExists,RuleDuplicateName:d.RuleDuplicateName,RuleNotFound:d.RuleNotFound,ServiceAlreadyExists:d.ServiceAlreadyExists,ServiceCommandNotFound:d.ServiceCommandNotFound,ServiceNotFound:d.ServiceNotFound,ServiceTypeNotFound:d.ServiceTypeNotFound,TwilioError:d.TwilioError,UserAlreadyConfirmed:d.UserAlreadyConfirmed,UserAppDomainMismatch:d.UserAppDomainMismatch,UserDisabled:d.UserDisabled,UserNotFound:d.UserNotFound,ValueAlreadyExists:d.ValueAlreadyExists,ValueDuplicateName:d.ValueDuplicateName,ValueNotFound:d.ValueNotFound};function y(t){return t in v?v[t]:d.Unknown}var g,A,m=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),E=function(t){function e(e,r){void 0===r&&(r=d.Unknown);var n=t.call(this,e)||this;return n.message=e,n.errorCode=r,n.errorCodeName=d[r],n}return m(e,t),e}(h),w=function(){function t(){}return t.APPLICATION_JSON="application/json",t.TEXT_EVENT_STREAM="text/event-stream",t}(),R=function(){function t(){}return t.getAuthorizationBearer=function(e){return t.AUTHORIZATION_BEARER+" "+e},t.CONTENT_TYPE_CANON="Content-Type",t.CONTENT_TYPE=t.CONTENT_TYPE_CANON.toLocaleLowerCase(),t.AUTHORIZATION_CANON="Authorization",t.AUTHORIZATION=t.AUTHORIZATION_CANON.toLocaleLowerCase(),t.ACCEPT_CANON="Accept",t.ACCEPT=t.ACCEPT_CANON.toLocaleLowerCase(),t.AUTHORIZATION_BEARER="Bearer",t}();function _(t){return t instanceof h?t:new l(t,c.DECODING_ERROR)}function I(t){if(void 0===t.body)throw new E("received unexpected status code "+t.statusCode,d.Unknown);var e;try{e=t.body}catch(n){throw new E("received unexpected status code "+t.statusCode,d.Unknown)}var r=function(t,e){if(void 0===t.headers[R.CONTENT_TYPE]||void 0!==t.headers[R.CONTENT_TYPE]&&t.headers[R.CONTENT_TYPE]!==w.APPLICATION_JSON)return e;var r=JSON.parse(e);if(!(r instanceof Object))return e;var n=r;if(void 0===n[g.ERROR])return e;var o=n[g.ERROR];if(void 0===n[g.ERROR_CODE])return o;var i=n[g.ERROR_CODE];throw new E(o,y(i))}(t,e);throw new E(r,d.Unknown)}!function(t){t.ERROR="error",t.ERROR_CODE="error_code"}(g||(g={})),function(t){t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.TRACE="TRACE",t.PATCH="PATCH"}(A||(A={}));var T=A,b=function(){function t(t,e,r,n,o){this.method=t,this.path=e,this.headers=r,this.body=o,this.startedAt=n}return Object.defineProperty(t.prototype,"builder",{get:function(){return new t.Builder(this)},enumerable:!0,configurable:!0}),t}();!function(t){var e=function(){function e(t){void 0!==t&&(this.method=t.method,this.path=t.path,this.headers=t.headers,this.body=t.body,this.startedAt=t.startedAt)}return e.prototype.withMethod=function(t){return this.method=t,this},e.prototype.withPath=function(t){return this.path=t,this},e.prototype.withHeaders=function(t){return this.headers=t,this},e.prototype.withBody=function(t){return this.body=t,this},e.prototype.build=function(){if(void 0===this.method)throw Error("must set method");if(void 0===this.path)throw Error("must set non-empty path");return void 0===this.startedAt&&(this.startedAt=Date.now()/1e3),new t(this.method,this.path,void 0===this.headers?{}:this.headers,this.startedAt,this.body)},e}();t.Builder=e}(b||(b={}));var O=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),N=function(t){function e(e,r,n){void 0===r&&(r=!1),void 0===n&&(n=!0);var o=t.call(this,e.method,e.path,e.headers,e.startedAt,e.body)||this;return o.useRefreshToken=r,o.shouldRefreshOnFailure=n,o}return O(e,t),Object.defineProperty(e.prototype,"builder",{get:function(){return new e.Builder(this)},enumerable:!0,configurable:!0}),e}(b);!function(t){var e=function(e){function r(t){return e.call(this,t)||this}return O(r,e),r.prototype.withAccessToken=function(){return this.useRefreshToken=!1,this},r.prototype.withRefreshToken=function(){return this.useRefreshToken=!0,this},r.prototype.withShouldRefreshOnFailure=function(t){return this.shouldRefreshOnFailure=t,this},r.prototype.build=function(){return this.useRefreshToken&&(this.shouldRefreshOnFailure=!1),new t(e.prototype.build.call(this),this.useRefreshToken,this.shouldRefreshOnFailure)},r}(b.Builder);t.Builder=e}(N||(N={}));var P=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),U=function(t){function e(e,r){var n=this;return(n=e instanceof N?t.call(this,e,e.useRefreshToken,e.shouldRefreshOnFailure)||this:t.call(this,e)||this).document=r,n}return P(e,t),Object.defineProperty(e.prototype,"builder",{get:function(){return new e.Builder(this)},enumerable:!0,configurable:!0}),e}(N);!function(t){var e=function(e){function r(t){var r=e.call(this,t)||this;return void 0!==t&&(r.document=t.document,r.useRefreshToken=t.useRefreshToken),r}return P(r,e),r.prototype.withDocument=function(t){return this.document=t,this},r.prototype.withAccessToken=function(){return this.useRefreshToken=!1,this},r.prototype.build=function(){if(void 0===this.document||!(this.document instanceof Object))throw new Error("document must be set: "+this.document);return void 0===this.headers&&this.withHeaders({}),this.headers[R.CONTENT_TYPE]=w.APPLICATION_JSON,this.withBody(o.a.stringify(this.document,{relaxed:!1})),new t(e.prototype.build.call(this),this.document)},r}(N.Builder);t.Builder=e}(U||(U={}));var S,C,D=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),k=function(t){function e(e,r){var n=t.call(this,e.method,e.path,e.headers,e.startedAt,e.body)||this;return n.document=r,n}return D(e,t),Object.defineProperty(e.prototype,"builder",{get:function(){return new e.Builder(this)},enumerable:!0,configurable:!0}),e}(b);!function(t){var e=function(e){function r(t){var r=e.call(this,t)||this;return void 0!==t&&(r.document=t.document),r}return D(r,e),r.prototype.withDocument=function(t){return this.document=t,this},r.prototype.build=function(){if(void 0===this.document||!(this.document instanceof Object))throw new Error("document must be set");return void 0===this.headers&&this.withHeaders({}),this.headers[R.CONTENT_TYPE]=w.APPLICATION_JSON,this.withBody(o.a.stringify(this.document,{relaxed:!1})),new t(e.prototype.build.call(this),this.document)},r}(b.Builder);t.Builder=e}(k||(k={})),function(t){t[t.LoggedOutDuringRequest=0]="LoggedOutDuringRequest",t[t.MustAuthenticateFirst=1]="MustAuthenticateFirst",t[t.UserNoLongerValid=2]="UserNoLongerValid",t[t.UserNotFound=3]="UserNotFound",t[t.UserNotLoggedIn=4]="UserNotLoggedIn",t[t.CouldNotLoadPersistedAuthInfo=5]="CouldNotLoadPersistedAuthInfo",t[t.CouldNotPersistAuthInfo=6]="CouldNotPersistAuthInfo",t[t.StreamingNotSupported=7]="StreamingNotSupported",t[t.StreamClosed=8]="StreamClosed",t[t.UnexpectedArguments=9]="UnexpectedArguments"}(C||(C={}));var L,M=((S={})[C.LoggedOutDuringRequest]="logged out while making a request to Stitch",S[C.MustAuthenticateFirst]="method called requires being authenticated",S[C.UserNoLongerValid]="user instance being accessed is no longer valid; please get a new user with auth.getUser()",S[C.UserNotFound]="user not found in list of users",S[C.UserNotLoggedIn]="cannot make the active user a logged out user; please use loginWithCredential() to switch to this user",S[C.CouldNotLoadPersistedAuthInfo]="failed to load stored auth information for Stitch",S[C.CouldNotPersistAuthInfo]="failed to save auth information for Stitch",S[C.StreamingNotSupported]="streaming not supported in this SDK",S[C.StreamClosed]="stream is closed",S[C.UnexpectedArguments]="function does not accept arguments",S),F=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),x=function(t){function e(e){var r=this,n="("+C[e]+"): "+M[e];return(r=t.call(this,n)||this).errorCode=e,r.errorCodeName=C[e],r}return F(e,t),e}(h),B=function(){function t(t,e){this.eventName=t,this.data=e}return t.MESSAGE_EVENT="message",t}(),j=function(){function t(e,r,n){this.eventName=e,r=r||"";for(var i=[],s=0;s<r.length;s++){var u=r[s];switch(u){case"%":if(s+2>=r.length)break;var a=void 0;switch(r.substring(s+1,s+3)){case"25":a=!0,i.push("%");break;case"0A":a=!0,i.push("\n");break;case"0D":a=!0,i.push("\r");break;default:a=!1}if(a){s+=2;continue}}i.push(u)}var c=i.join("");switch(this.eventName){case t.ERROR_EVENT_NAME:var h=void 0,f=void 0;try{var p=o.a.parse(c,{strict:!1});h=p[L.Error],f=y(p[L.ErrorCode])}catch(l){h=c,f=d.Unknown}this.error=new E(h,f);break;case B.MESSAGE_EVENT:this.data=o.a.parse(c,{strict:!1}),n&&(this.data=n.decode(this.data))}}return t.fromEvent=function(e,r){return new t(e.eventName,e.data,r)},t.ERROR_EVENT_NAME="error",t}();!function(t){t.Error="error",t.ErrorCode="error_code"}(L||(L={}));var q=function(){function t(t,e){this.eventStream=t,this.decoder=e,this.listeners=[]}return t.prototype.next=function(){var t=this;return this.eventStream.nextEvent().then((function(e){var r=j.fromEvent(e,t.decoder);if(r.eventName===j.ERROR_EVENT_NAME)throw r.error;return r.eventName===B.MESSAGE_EVENT?r.data:t.next()}))},t.prototype.onNext=function(t){var e=this,r={onEvent:function(r){var n=j.fromEvent(r,e.decoder);n.eventName===B.MESSAGE_EVENT&&t(n.data)}};this.eventStream.addListener(r)},t.prototype.onError=function(t){var e=this,r={onEvent:function(r){var n=j.fromEvent(r,e.decoder);n.eventName===j.ERROR_EVENT_NAME&&t(n.error)}};this.eventStream.addListener(r)},t.prototype.addListener=function(t){var e=this,r={onEvent:function(r){var n=j.fromEvent(r,e.decoder);n.eventName===j.ERROR_EVENT_NAME?t.onError&&t.onError(n.error):t.onNext&&t.onNext(n.data)}};this.listeners.push([t,r]),this.eventStream.addListener(r)},t.prototype.removeListener=function(t){for(var e=-1,r=0;r<this.listeners.length;r++)if(this.listeners[r][0]===t){e=r;break}if(-1!==e){var n=this.listeners[e][1];this.listeners.splice(e,1),this.eventStream.removeListener(n)}},t.prototype.isOpen=function(){return this.eventStream.isOpen()},t.prototype.close=function(){this.eventStream.close()},t}(),V=function(){function t(t,e,r){void 0===e&&(e={}),void 0===r&&(r=[]),this.userType=t,this.data=e,this.identities=r}return t.empty=function(){return new t},Object.defineProperty(t.prototype,"name",{get:function(){return this.data.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"email",{get:function(){return this.data.email},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pictureUrl",{get:function(){return this.data.picture},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstName",{get:function(){return this.data.first_name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastName",{get:function(){return this.data.last_name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gender",{get:function(){return this.data.gender},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"birthday",{get:function(){return this.data.birthday},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minAge",{get:function(){var t=this.data.min_age;if(void 0!==t)return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxAge",{get:function(){var t=this.data.max_age;if(void 0!==t)return t},enumerable:!0,configurable:!0}),t}(),W=function(){function t(t,e,r,n,o,i,s){this.id=t,this.loggedInProviderType=e,this.loggedInProviderName=r,this.profile=void 0===i?V.empty():i,this.isLoggedIn=n,this.lastAuthActivity=o,this.customData=void 0===s?{}:s}return Object.defineProperty(t.prototype,"userType",{get:function(){return this.profile.userType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identities",{get:function(){return this.profile.identities},enumerable:!0,configurable:!0}),t.prototype.equals=function(t){return this.id===t.id&&JSON.stringify(this.identities)===JSON.stringify(t.identities)&&this.isLoggedIn===t.isLoggedIn&&this.loggedInProviderName===t.loggedInProviderName&&this.loggedInProviderType===t.loggedInProviderType&&JSON.stringify(this.profile)===JSON.stringify(t.profile)},t}(),Y=function(){function t(){}return t.TYPE="anon-user",t.DEFAULT_NAME="anon-user",t}(),K=function(t,e,r,n){this.authInfo=t,this.providerType=e,this.providerName=r,this.asLink=n},H=r("H7XF");function G(t){var e,r=t.length%4;0!=r?e=t+"=".repeat(4-r):e=t;var n=Object(H.toByteArray)(e);return function(t,e,r){var n="",o="";r=Math.min(t.length,r||1/0);for(var i=e=e||0;i<r;i++)t[i]<=127?(n+=X(o)+String.fromCharCode(t[i]),o=""):o+="%"+t[i].toString(16);return n+X(o)}(n,0,n.length)}function J(t){var e;return"undefined"===typeof Uint8Array&&(e=z(t)),e=new Uint8Array(z(t)),Object(H.fromByteArray)(e)}function z(t){for(var e,r=1/0,n=t.length,o=null,i=[],s=0;s<n;s++){if((e=t.charCodeAt(s))>55295&&e<57344){if(!o){if(e>56319){(r-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(r-=3)>-1&&i.push(239,191,189);continue}o=e;continue}if(e<56320){(r-=3)>-1&&i.push(239,191,189),o=e;continue}e=o-55296<<10|e-56320|65536,o=null}else o&&((r-=3)>-1&&i.push(239,191,189),o=null);if(e<128){if((r-=1)<0)break;i.push(e)}else if(e<2048){if((r-=2)<0)break;i.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;i.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<2097152))throw new Error("Invalid code point");if((r-=4)<0)break;i.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return i}function X(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var Z,$=function(){function t(t,e,r){this.expires=t,this.issuedAt=e,this.userData=r}return t.fromEncoded=function(e){var r=t.splitToken(e),n=JSON.parse(G(r[1]));return new t(n.exp,n.iat,n.user_data)},t.splitToken=function(t){var e=t.split(".");if(3!==e.length)throw new Error("Malformed JWT token. The string "+t+" should have 3 parts.");return e},t}(),Q=6e4,tt=function(){function t(t){this.auth=t}return t.prototype.shouldRefresh=function(){var t=this.auth;if(void 0===t)return!1;if(!t.isLoggedIn)return!1;var e,r=t.authInfo;if(void 0===r)return!1;if(!r.isLoggedIn)return!1;try{e=$.fromEncoded(r.accessToken)}catch(n){return console.log(n),!1}return!(Date.now()/1e3<e.expires-300)},t.prototype.run=function(){var t=this;this.shouldRefresh()?this.auth.refreshAccessToken().then((function(){t.nextTimeout=setTimeout((function(){return t.run()}),Q)})).catch((function(){t.nextTimeout=setTimeout((function(){return t.run()}),Q)})):this.nextTimeout=setTimeout((function(){return t.run()}),Q)},t.prototype.stop=function(){clearTimeout(this.nextTimeout)},t}(),et=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){t.USER_ID="user_id",t.DEVICE_ID="device_id",t.ACCESS_TOKEN="access_token",t.REFRESH_TOKEN="refresh_token"}(Z||(Z={}));var rt,nt=function(t){function e(e,r,n,o){return t.call(this,e,r,n,o)||this}return et(e,t),e.fromJSON=function(t){return new e(t[Z.USER_ID],t[Z.DEVICE_ID],t[Z.ACCESS_TOKEN],t[Z.REFRESH_TOKEN])},e.prototype.toJSON=function(){var t;return(t={})[Z.USER_ID]=this.userId,t[Z.DEVICE_ID]=this.deviceId,t[Z.ACCESS_TOKEN]=this.accessToken,t[Z.REFRESH_TOKEN]=this.refreshToken,t},e}(i),ot=function(){function t(){}return t.keyPresent=function(t,e){if(void 0===e[t])throw new Error("expected "+t+" to be present")},t}(),it=function(t,e){this.id=t,this.providerType=e},st=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){t.ID="id",t.PROVIDER_TYPE="provider_type"}(rt||(rt={}));var ut,at=function(t){function e(e,r){return t.call(this,e,r)||this}return st(e,t),e.fromJSON=function(t){return new e(t[rt.ID],t[rt.PROVIDER_TYPE])},e.prototype.toJSON=function(){var t;return(t={})[rt.ID]=this.id,t[rt.PROVIDER_TYPE]=this.providerType,t},e}(it),ct=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){t.DATA="data",t.USER_TYPE="type",t.IDENTITIES="identities"}(ut||(ut={}));var ht,dt=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return ct(e,t),e.fromJSON=function(t){return ot.keyPresent(ut.USER_TYPE,t),ot.keyPresent(ut.DATA,t),ot.keyPresent(ut.IDENTITIES,t),new e(t[ut.USER_TYPE],t[ut.DATA],t[ut.IDENTITIES].map(at.fromJSON))},e.prototype.toJSON=function(){var t;return(t={})[ut.DATA]=this.data,t[ut.USER_TYPE]=this.userType,t[ut.IDENTITIES]=this.identities,t},e}(V),ft=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){t.ID="id",t.PROVIDER_TYPE="provider_type"}(ht||(ht={}));var pt,lt=function(t){function e(e,r){return t.call(this,e,r)||this}return ft(e,t),e.decode=function(t){return new e(t[ht.ID],t[ht.PROVIDER_TYPE])},e.prototype.encode=function(){var t;return(t={})[ht.ID]=this.id,t[ht.PROVIDER_TYPE]=this.providerType,t},e}(it),vt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){t.DATA="data",t.USER_TYPE="type",t.IDENTITIES="identities"}(pt||(pt={}));var yt,gt=function(t){function e(e,r,n){var o=t.call(this,e,r,n)||this;return o.userType=e,o.data=r,o.identities=n,o}return vt(e,t),e.decode=function(t){return t?new e(t[pt.USER_TYPE],t[pt.DATA],t[pt.IDENTITIES].map((function(t){return lt.decode(t)}))):void 0},e.prototype.encode=function(){var t;return(t={})[pt.DATA]=this.data,t[pt.USER_TYPE]=this.userType,t[pt.IDENTITIES]=this.identities.map((function(t){return t.encode()})),t},e}(V),At=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function mt(t,e){if(t.isEmpty)e.remove(Rt.ACTIVE_USER_STORAGE_NAME);else{var r=new Rt(t.userId,t.deviceId,t.accessToken,t.refreshToken,t.loggedInProviderType,t.loggedInProviderName,t.lastAuthActivity,t.userProfile?new gt(t.userProfile.userType,t.userProfile.data,t.userProfile.identities.map((function(t){return new lt(t.id,t.providerType)}))):void 0);e.set(Rt.ACTIVE_USER_STORAGE_NAME,JSON.stringify(r.encode()))}}function Et(t,e){var r=[];t.forEach((function(t,e){var n=new Rt(e,t.deviceId,t.accessToken,t.refreshToken,t.loggedInProviderType,t.loggedInProviderName,t.lastAuthActivity,t.userProfile?new gt(t.userProfile.userType,t.userProfile.data,t.userProfile.identities.map((function(t){return new lt(t.id,t.providerType)}))):void 0);r.push(n.encode())})),e.set(Rt.ALL_USERS_STORAGE_NAME,JSON.stringify(r))}!function(t){t.USER_ID="user_id",t.DEVICE_ID="device_id",t.ACCESS_TOKEN="access_token",t.REFRESH_TOKEN="refresh_token",t.LAST_AUTH_ACTIVITY="last_auth_activity",t.LOGGED_IN_PROVIDER_TYPE="logged_in_provider_type",t.LOGGED_IN_PROVIDER_NAME="logged_in_provider_name",t.USER_PROFILE="user_profile"}(yt||(yt={}));var wt,Rt=function(t){function e(e,r,n,o,i,s,u,a){var c=t.call(this,e,r,n,o,i,s,u,a)||this;return c.userProfile=a,c}return At(e,t),e.decode=function(t){var r=t[yt.USER_ID],n=t[yt.DEVICE_ID],o=t[yt.ACCESS_TOKEN],i=t[yt.REFRESH_TOKEN],s=t[yt.LOGGED_IN_PROVIDER_TYPE],u=t[yt.LOGGED_IN_PROVIDER_NAME],a=t[yt.USER_PROFILE],c=t[yt.LAST_AUTH_ACTIVITY];return new e(r,n,o,i,s,u,new Date(c),gt.decode(a))},e.prototype.encode=function(){var t={};return t[yt.USER_ID]=this.userId,t[yt.ACCESS_TOKEN]=this.accessToken,t[yt.REFRESH_TOKEN]=this.refreshToken,t[yt.DEVICE_ID]=this.deviceId,t[yt.LOGGED_IN_PROVIDER_NAME]=this.loggedInProviderName,t[yt.LOGGED_IN_PROVIDER_TYPE]=this.loggedInProviderType,t[yt.LAST_AUTH_ACTIVITY]=this.lastAuthActivity?this.lastAuthActivity.getTime():void 0,t[yt.USER_PROFILE]=this.userProfile?this.userProfile.encode():void 0,t},e.ACTIVE_USER_STORAGE_NAME="auth_info",e.ALL_USERS_STORAGE_NAME="all_auth_infos",e}(i),_t=function(t){var e="function"===typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},It=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},Tt=function(){function t(t,e,r,n){var o,s;void 0===n&&(n=!0),this.requestClient=t,this.authRoutes=e,this.storage=r;try{o=function(t){var e=t.get(Rt.ALL_USERS_STORAGE_NAME);if(!e)return new Map;var r=JSON.parse(e);if(!Array.isArray(r))throw new x(C.CouldNotLoadPersistedAuthInfo);var n=new Map;return r.forEach((function(t){var e=Rt.decode(t);n.set(e.userId,e)})),n}(r)}catch(u){throw new x(C.CouldNotLoadPersistedAuthInfo)}this.allUsersAuthInfo=o;try{s=function(t){var e=t.get(Rt.ACTIVE_USER_STORAGE_NAME);if(e)return Rt.decode(JSON.parse(e))}(r)}catch(u){throw new x(C.CouldNotLoadPersistedAuthInfo)}this.activeUserAuthInfo=void 0===s?i.empty():s,this.activeUserAuthInfo.hasUser&&(this.currentUser=this.prepUser(this.activeUserAuthInfo)),n&&(this.accessTokenRefresher=new tt(this),this.accessTokenRefresher.run())}return Object.defineProperty(t.prototype,"authInfo",{get:function(){return this.activeUserAuthInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoggedIn",{get:function(){return void 0!==this.currentUser&&this.currentUser.isLoggedIn},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"user",{get:function(){return this.currentUser},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasDeviceId",{get:function(){return void 0!==this.activeUserAuthInfo.deviceId&&""!==this.activeUserAuthInfo.deviceId&&"000000000000000000000000"!==this.activeUserAuthInfo.deviceId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deviceId",{get:function(){if(this.hasDeviceId)return this.activeUserAuthInfo.deviceId},enumerable:!0,configurable:!0}),t.prototype.listUsers=function(){var t=this,e=[];return this.allUsersAuthInfo.forEach((function(r){e.push(t.prepUser(r))})),e},t.prototype.doAuthenticatedRequest=function(t,e){var r=this;try{return this.requestClient.doRequest(this.prepareAuthRequest(t,e||this.activeUserAuthInfo)).catch((function(e){return r.handleAuthFailure(e,t)}))}catch(n){return Promise.reject(n)}},t.prototype.doAuthenticatedRequestWithDecoder=function(t,e){return this.doAuthenticatedRequest(t).then((function(t){var r=o.a.parse(t.body,{strict:!1});return e?e.decode(r):r})).catch((function(t){throw _(t)}))},t.prototype.openAuthenticatedEventStream=function(t,e){var r=this;if(void 0===e&&(e=!0),!this.isLoggedIn)throw new x(C.MustAuthenticateFirst);var n=t.useRefreshToken?this.activeUserAuthInfo.refreshToken:this.activeUserAuthInfo.accessToken;return this.requestClient.doStreamRequest(t.builder.withPath(t.path+"&stitch_at="+n).build(),e,(function(){return r.openAuthenticatedEventStream(t,!1)})).catch((function(n){return r.handleAuthFailureForEventStream(n,t,e)}))},t.prototype.openAuthenticatedStreamWithDecoder=function(t,e){return this.openAuthenticatedEventStream(t).then((function(t){return new q(t,e)}))},t.prototype.refreshAccessToken=function(){var t=this,e=(new N.Builder).withRefreshToken().withPath(this.authRoutes.sessionRoute).withMethod(T.POST);return this.doAuthenticatedRequest(e.build()).then((function(e){try{var r=nt.fromJSON(JSON.parse(e.body));if(t.activeUserAuthInfo=t.activeUserAuthInfo.merge(r),r.accessToken&&t.user instanceof W){var n=$.fromEncoded(r.accessToken).userData;t.user.customData=void 0===n?{}:n}}catch(o){throw new l(o,c.DECODING_ERROR)}try{mt(t.activeUserAuthInfo,t.storage),t.allUsersAuthInfo.set(t.activeUserAuthInfo.userId,t.activeUserAuthInfo),Et(t.allUsersAuthInfo,t.storage)}catch(o){throw new x(C.CouldNotPersistAuthInfo)}}))},t.prototype.switchToUserWithId=function(t){var e=this.allUsersAuthInfo.get(t);if(void 0===e)throw new x(C.UserNotFound);if(!e.isLoggedIn)throw new x(C.UserNotLoggedIn);this.activeUserAuthInfo.hasUser&&this.allUsersAuthInfo.set(this.activeUserAuthInfo.userId,this.activeUserAuthInfo.withNewAuthActivityTime());var r=e.withNewAuthActivityTime();this.allUsersAuthInfo.set(t,r),mt(r,this.storage),this.activeUserAuthInfo=r;var o=this.currentUser;return this.currentUser=this.prepUser(r),this.onAuthEvent(),this.dispatchAuthEvent({currentActiveUser:this.currentUser,kind:n.ActiveUserChanged,previousActiveUser:o}),this.currentUser},t.prototype.loginWithCredentialInternal=function(t){var e,r,o=this;if(t instanceof K)return this.processLogin(t,t.authInfo,t.asLink).then((function(t){return o.dispatchAuthEvent({kind:n.UserLoggedIn,loggedInUser:t}),t}));if(t.providerCapabilities.reusesExistingSession)try{for(var i=_t(this.allUsersAuthInfo),s=i.next();!s.done;s=i.next()){var u=It(s.value,2),a=u[0],c=u[1];if(c.loggedInProviderType===t.providerType){if(c.isLoggedIn)try{return Promise.resolve(this.switchToUserWithId(a))}catch(h){return Promise.reject(h)}void 0!==c.userId&&this.removeUserWithIdInternal(c.userId)}}}catch(d){e={error:d}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return this.doLogin(t,!1)},t.prototype.linkUserWithCredentialInternal=function(t,e){return void 0!==this.currentUser&&t.id!==this.currentUser.id?Promise.reject(new x(C.UserNoLongerValid)):this.doLogin(e,!0)},t.prototype.logoutInternal=function(){return this.isLoggedIn&&this.currentUser?this.logoutUserWithIdInternal(this.currentUser.id):Promise.resolve()},t.prototype.logoutUserWithIdInternal=function(t){var e=this,r=this.allUsersAuthInfo.get(t);if(void 0===r)return Promise.reject(new x(C.UserNotFound));if(!r.isLoggedIn)return Promise.resolve();var n=function(){e.clearUserAuthTokens(r.userId),r.loggedInProviderType===Y.TYPE&&e.removeUserWithIdInternal(r.userId)};return this.doLogout(r).then((function(){n()})).catch((function(){n()}))},t.prototype.removeUserInternal=function(){return this.isLoggedIn&&void 0!==this.currentUser?this.removeUserWithIdInternal(this.currentUser.id):Promise.resolve()},t.prototype.removeUserWithIdInternal=function(t){var e=this,r=this.allUsersAuthInfo.get(t);if(void 0===r)return Promise.reject(new x(C.UserNotFound));var o=function(){e.clearUserAuthTokens(r.userId),e.allUsersAuthInfo.delete(t),Et(e.allUsersAuthInfo,e.storage);var o=e.prepUser(r.loggedOut());e.onAuthEvent(),e.dispatchAuthEvent({kind:n.UserRemoved,removedUser:o})};return r.isLoggedIn?this.doLogout(r).then((function(){o()})).catch((function(t){o()})):(o(),Promise.resolve())},t.prototype.close=function(){this.accessTokenRefresher&&this.accessTokenRefresher.stop()},t.prototype.prepareAuthRequest=function(t,e){if(!e.isLoggedIn)throw new x(C.MustAuthenticateFirst);var r=t.builder,n=r.headers||{};return t.useRefreshToken?n[R.AUTHORIZATION]=R.getAuthorizationBearer(e.refreshToken):n[R.AUTHORIZATION]=R.getAuthorizationBearer(e.accessToken),r.withHeaders(n),r.build()},t.prototype.handleAuthFailureForEventStream=function(t,e,r){var n=this;if(void 0===r&&(r=!0),!(t instanceof E)||t.errorCode!==d.InvalidSession)throw t;if(e.useRefreshToken||!e.shouldRefreshOnFailure)throw this.clearActiveUserAuth(),t;return this.tryRefreshAccessToken(e.startedAt).then((function(){return n.openAuthenticatedEventStream(e.builder.withShouldRefreshOnFailure(!1).build(),r)}))},t.prototype.handleAuthFailure=function(t,e){var r=this;if(!(t instanceof E)||t.errorCode!==d.InvalidSession)throw t;if(e.useRefreshToken||!e.shouldRefreshOnFailure)throw this.clearActiveUserAuth(),t;return this.tryRefreshAccessToken(e.startedAt).then((function(){return r.doAuthenticatedRequest(e.builder.withShouldRefreshOnFailure(!1).build())}))},t.prototype.tryRefreshAccessToken=function(t){if(!this.isLoggedIn)throw new x(C.LoggedOutDuringRequest);try{if($.fromEncoded(this.activeUserAuthInfo.accessToken).issuedAt>=t)return Promise.resolve()}catch(e){}return this.refreshAccessToken()},t.prototype.prepUser=function(t){return this.userFactory.makeUser(t.userId,t.loggedInProviderType,t.loggedInProviderName,t.isLoggedIn,t.lastAuthActivity,t.userProfile)},t.prototype.attachAuthOptions=function(t){var e={};e.device=this.deviceInfo,t.options=e},t.prototype.doLogin=function(t,e){var r=this,o=this.currentUser;return this.doLoginRequest(t,e).then((function(n){return r.processLoginResponse(t,n,e)})).then((function(t){return r.onAuthEvent(),e?r.dispatchAuthEvent({kind:n.UserLinked,linkedUser:t}):(r.dispatchAuthEvent({kind:n.UserLoggedIn,loggedInUser:t}),r.dispatchAuthEvent({currentActiveUser:t,kind:n.ActiveUserChanged,previousActiveUser:o})),t}))},t.prototype.doLoginRequest=function(t,e){var r=new k.Builder;r.withMethod(T.POST),e?r.withPath(this.authRoutes.getAuthProviderLinkRoute(t.providerName)):r.withPath(this.authRoutes.getAuthProviderLoginRoute(t.providerName));var n=t.material;if(this.attachAuthOptions(n),r.withDocument(n),!e)return this.requestClient.doRequest(r.build());var o=new U(r.build(),r.document);return this.doAuthenticatedRequest(o)},t.prototype.processLogin=function(t,e,r){var o=this,s=this.activeUserAuthInfo,u=this.currentUser;return e=this.activeUserAuthInfo.merge(new i(e.userId,e.deviceId,e.accessToken,e.refreshToken,t.providerType,t.providerName,void 0,void 0)),this.activeUserAuthInfo=e,this.currentUser=this.userFactory.makeUser(this.activeUserAuthInfo.userId,t.providerType,t.providerName,this.activeUserAuthInfo.isLoggedIn,new Date,void 0,$.fromEncoded(e.accessToken).userData),this.doGetUserProfile().then((function(r){s.hasUser&&o.allUsersAuthInfo.set(s.userId,s.withNewAuthActivityTime()),e=e.merge(new i(e.userId,e.deviceId,e.accessToken,e.refreshToken,t.providerType,t.providerName,new Date,r));var a=!o.allUsersAuthInfo.has(e.userId);try{mt(e,o.storage),o.allUsersAuthInfo.set(e.userId,e),Et(o.allUsersAuthInfo,o.storage)}catch(c){throw o.activeUserAuthInfo=s,o.currentUser=u,e.userId!==s.userId&&e.userId&&o.allUsersAuthInfo.delete(e.userId),new x(C.CouldNotPersistAuthInfo)}return o.activeUserAuthInfo=e,o.currentUser=o.userFactory.makeUser(o.activeUserAuthInfo.userId,t.providerType,t.providerName,o.activeUserAuthInfo.isLoggedIn,o.activeUserAuthInfo.lastAuthActivity,r,$.fromEncoded(e.accessToken).userData),a&&(o.onAuthEvent(),o.dispatchAuthEvent({addedUser:o.currentUser,kind:n.UserAdded})),o.currentUser})).catch((function(t){if(t instanceof x)throw t;if(r||s.hasUser){var e=o.activeUserAuthInfo;o.activeUserAuthInfo=s,o.currentUser=u,r&&(o.activeUserAuthInfo=o.activeUserAuthInfo.withAuthProvider(e.loggedInProviderType,e.loggedInProviderName))}else o.clearActiveUserAuth();throw t}))},t.prototype.processLoginResponse=function(t,e,r){try{if(!e)throw new E("the login response could not be processed for credential: "+t+";response was undefined");if(!e.body)throw new E("response with status code "+e.statusCode+" has empty body");return this.processLogin(t,nt.fromJSON(JSON.parse(e.body)),r)}catch(n){throw new l(n,c.DECODING_ERROR)}},t.prototype.doGetUserProfile=function(){var t=new N.Builder;return t.withMethod(T.GET).withPath(this.authRoutes.profileRoute),this.doAuthenticatedRequest(t.build()).then((function(t){return dt.fromJSON(JSON.parse(t.body))})).catch((function(t){throw t instanceof h?t:new l(t,c.DECODING_ERROR)}))},t.prototype.doLogout=function(t){var e=new N.Builder;return e.withRefreshToken().withPath(this.authRoutes.sessionRoute).withMethod(T.DELETE),this.doAuthenticatedRequest(e.build(),t).then((function(){}))},t.prototype.clearActiveUserAuth=function(){this.isLoggedIn&&this.clearUserAuthTokens(this.activeUserAuthInfo.userId)},t.prototype.clearUserAuthTokens=function(t){var e=this.allUsersAuthInfo.get(t);if(void 0===e){if(this.activeUserAuthInfo.userId!==t)throw new x(C.UserNotFound)}else if(!e.isLoggedIn)return;try{var r=void 0;if(e){var o=e.loggedOut();this.allUsersAuthInfo.set(t,o),Et(this.allUsersAuthInfo,this.storage),r=this.userFactory.makeUser(o.userId,o.loggedInProviderType,o.loggedInProviderName,o.isLoggedIn,o.lastAuthActivity,o.userProfile)}var i=!1;this.activeUserAuthInfo.hasUser&&this.activeUserAuthInfo.userId===t&&(i=!0,this.activeUserAuthInfo=this.activeUserAuthInfo.withClearedUser(),this.currentUser=void 0,mt(this.activeUserAuthInfo,this.storage)),r&&(this.onAuthEvent(),this.dispatchAuthEvent({kind:n.UserLoggedOut,loggedOutUser:r}),i&&this.dispatchAuthEvent({currentActiveUser:void 0,kind:n.ActiveUserChanged,previousActiveUser:r}))}catch(s){throw new x(C.CouldNotPersistAuthInfo)}},t}();!function(t){t.DEVICE_ID="deviceId",t.APP_ID="appId",t.APP_VERSION="appVersion",t.PLATFORM="platform",t.PLATFORM_VERSION="platformVersion",t.SDK_VERSION="sdkVersion"}(wt||(wt={}));var bt,Ot=wt,Nt=function(t){void 0===t&&(t=!1),this.reusesExistingSession=t},Pt=function(t){void 0===t&&(t=Y.DEFAULT_NAME),this.providerType=Y.TYPE,this.material={},this.providerCapabilities=new Nt(!0),this.providerName=t},Ut=function(){function t(){}return t.TYPE="custom-token",t.DEFAULT_NAME="custom-token",t}();!function(t){t.TOKEN="token"}(bt||(bt={}));var St,Ct=function(t,e){var r;void 0===e&&(e=Ut.DEFAULT_NAME),this.providerType=Ut.TYPE,this.providerCapabilities=new Nt(!1),this.providerName=e,this.token=t,this.material=((r={})[bt.TOKEN]=this.token,r)},Dt=function(){function t(){}return t.TYPE="oauth2-facebook",t.DEFAULT_NAME="oauth2-facebook",t}();!function(t){t.ACCESS_TOKEN="accessToken"}(St||(St={}));var kt,Lt=function(){function t(t,e){var r;void 0===e&&(e=Dt.DEFAULT_NAME),this.providerType=Dt.TYPE,this.providerName=e,this.accessToken=t,this.material=((r={})[St.ACCESS_TOKEN]=this.accessToken,r)}return Object.defineProperty(t.prototype,"providerCapabilities",{get:function(){return new Nt(!1)},enumerable:!0,configurable:!0}),t}(),Mt=function(){function t(){}return t.TYPE="custom-function",t.DEFAULT_NAME="custom-function",t}(),Ft=function(){function t(t,e){void 0===e&&(e=Mt.DEFAULT_NAME),this.providerType=Mt.TYPE,this.providerName=e,this.material=t}return Object.defineProperty(t.prototype,"providerCapabilities",{get:function(){return new Nt(!1)},enumerable:!0,configurable:!0}),t}(),xt=function(){function t(){}return t.TYPE="oauth2-google",t.DEFAULT_NAME="oauth2-google",t}();!function(t){t.AUTH_CODE="authCode"}(kt||(kt={}));var Bt,jt=function(t,e){var r;void 0===e&&(e=xt.DEFAULT_NAME),this.providerType=xt.TYPE,this.providerCapabilities=new Nt(!1),this.providerName=e,this.authCode=t,this.material=((r={})[kt.AUTH_CODE]=this.authCode,r)},qt=function(){function t(){}return t.TYPE="api-key",t.DEFAULT_NAME="api-key",t}();!function(t){t.KEY="key"}(Bt||(Bt={}));var Vt,Wt=function(t,e){var r;void 0===e&&(e=qt.DEFAULT_NAME),this.providerType=qt.TYPE,this.providerCapabilities=new Nt(!1),this.providerName=e,this.key=t,this.material=((r={})[Bt.KEY]=this.key,r)},Yt=function(t,e,r){this.providerName=t,this.requestClient=e,this.baseRoute=r};!function(t){t.ID="_id",t.KEY="key",t.NAME="name",t.DISABLED="disabled"}(Vt||(Vt={}));var Kt,Ht=function(){function t(t,e,r,n){this.id=o.b.ObjectID.createFromHexString(t),this.key=e,this.name=r,this.disabled=n}return t.readFromApi=function(e){var r="string"===typeof e?JSON.parse(e):e;return ot.keyPresent(Vt.ID,r),ot.keyPresent(Vt.NAME,r),ot.keyPresent(Vt.DISABLED,r),new t(r[Vt.ID],r[Vt.KEY],r[Vt.NAME],r[Vt.DISABLED])},t.prototype.toJSON=function(){var t;return(t={})[Vt.ID]=this.id,t[Vt.KEY]=this.key,t[Vt.NAME]=this.name,t[Vt.DISABLED]=this.disabled,t},t}(),Gt=function(){function t(){}return t.TYPE="api-key",t.DEFAULT_NAME="api-key",t}(),Jt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){t.NAME="name"}(Kt||(Kt={}));var zt,Xt=function(t){function e(e,r){var n=r.baseAuthRoute+"/api_keys",o=Gt.DEFAULT_NAME;return t.call(this,o,e,n)||this}return Jt(e,t),e.prototype.createApiKey=function(t){var e,r=new U.Builder;return r.withMethod(T.POST).withPath(this.baseRoute).withDocument((e={},e[Kt.NAME]=t,e)).withRefreshToken(),this.requestClient.doAuthenticatedRequest(r.build()).then((function(t){return Ht.readFromApi(t.body)})).catch((function(t){throw _(t)}))},e.prototype.fetchApiKey=function(t){var e=new N.Builder;return e.withMethod(T.GET).withPath(this.getApiKeyRoute(t.toHexString())),e.withRefreshToken(),this.requestClient.doAuthenticatedRequest(e.build()).then((function(t){return Ht.readFromApi(t.body)})).catch((function(t){throw _(t)}))},e.prototype.fetchApiKeys=function(){var t=new N.Builder;return t.withMethod(T.GET).withPath(this.baseRoute),t.withRefreshToken(),this.requestClient.doAuthenticatedRequest(t.build()).then((function(t){var e=JSON.parse(t.body);if(Array.isArray(e))return e.map((function(t){return Ht.readFromApi(t)}));throw new l(new Error("unexpected non-array response from server"),c.DECODING_ERROR)})).catch((function(t){throw _(t)}))},e.prototype.deleteApiKey=function(t){var e=new N.Builder;return e.withMethod(T.DELETE).withPath(this.getApiKeyRoute(t.toHexString())),e.withRefreshToken(),this.requestClient.doAuthenticatedRequest(e.build()).then((function(){}))},e.prototype.enableApiKey=function(t){var e=new N.Builder;return e.withMethod(T.PUT).withPath(this.getApiKeyEnableRoute(t.toHexString())),e.withRefreshToken(),this.requestClient.doAuthenticatedRequest(e.build()).then((function(){}))},e.prototype.disableApiKey=function(t){var e=new N.Builder;return e.withMethod(T.PUT).withPath(this.getApiKeyDisableRoute(t.toHexString())),e.withRefreshToken(),this.requestClient.doAuthenticatedRequest(e.build()).then((function(){}))},e.prototype.getApiKeyRoute=function(t){return this.baseRoute+"/"+t},e.prototype.getApiKeyEnableRoute=function(t){return this.getApiKeyRoute(t)+"/enable"},e.prototype.getApiKeyDisableRoute=function(t){return this.getApiKeyRoute(t)+"/disable"},e}(Yt);!function(t){t.KEY="key"}(zt||(zt={}));var Zt,$t,Qt=function(t,e){var r;void 0===e&&(e=Gt.DEFAULT_NAME),this.providerType=Gt.TYPE,this.providerCapabilities=new Nt(!1),this.providerName=e,this.key=t,this.material=((r={})[zt.KEY]=this.key,r)},te=function(){function t(){}return t.TYPE="local-userpass",t.DEFAULT_NAME="local-userpass",t}(),ee=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){t.EMAIL="email",t.PASSWORD="password"}(Zt||(Zt={})),function(t){t.EMAIL="email",t.PASSWORD="password",t.TOKEN="token",t.TOKEN_ID="tokenId",t.ARGS="arguments"}($t||($t={}));var re,ne=function(t){function e(e,r,n){void 0===e&&(e=te.DEFAULT_NAME);var o=n.getAuthProviderRoute(e);return t.call(this,e,r,o)||this}return ee(e,t),e.prototype.registerWithEmailInternal=function(t,e){var r,n=new k.Builder;return n.withMethod(T.POST).withPath(this.getRegisterWithEmailRoute()),n.withDocument(((r={})[Zt.EMAIL]=t,r[Zt.PASSWORD]=e,r)),this.requestClient.doRequest(n.build()).then((function(){}))},e.prototype.confirmUserInternal=function(t,e){var r,n=new k.Builder;return n.withMethod(T.POST).withPath(this.getConfirmUserRoute()),n.withDocument(((r={})[$t.TOKEN]=t,r[$t.TOKEN_ID]=e,r)),this.requestClient.doRequest(n.build()).then((function(){}))},e.prototype.resendConfirmationEmailInternal=function(t){var e,r=new k.Builder;return r.withMethod(T.POST).withPath(this.getResendConfirmationEmailRoute()),r.withDocument(((e={})[$t.EMAIL]=t,e)),this.requestClient.doRequest(r.build()).then((function(){}))},e.prototype.resetPasswordInternal=function(t,e,r){var n,o=new k.Builder;return o.withMethod(T.POST).withPath(this.getResetPasswordRoute()),o.withDocument(((n={})[$t.TOKEN]=t,n[$t.TOKEN_ID]=e,n[$t.PASSWORD]=r,n)),this.requestClient.doRequest(o.build()).then((function(){}))},e.prototype.sendResetPasswordEmailInternal=function(t){var e,r=new k.Builder;return r.withMethod(T.POST).withPath(this.getSendResetPasswordEmailRoute()),r.withDocument(((e={})[$t.EMAIL]=t,e)),this.requestClient.doRequest(r.build()).then((function(){}))},e.prototype.callResetPasswordFunctionInternal=function(t,e,r){var n,o=new k.Builder;return o.withMethod(T.POST).withPath(this.getCallResetPasswordFunctionRoute()),o.withDocument(((n={})[$t.EMAIL]=t,n[$t.PASSWORD]=e,n[$t.ARGS]=r,n)),this.requestClient.doRequest(o.build()).then((function(){}))},e.prototype.getRegisterWithEmailRoute=function(){return this.getExtensionRoute("register")},e.prototype.getConfirmUserRoute=function(){return this.getExtensionRoute("confirm")},e.prototype.getResendConfirmationEmailRoute=function(){return this.getExtensionRoute("confirm/send")},e.prototype.getResetPasswordRoute=function(){return this.getExtensionRoute("reset")},e.prototype.getSendResetPasswordEmailRoute=function(){return this.getExtensionRoute("reset/send")},e.prototype.getCallResetPasswordFunctionRoute=function(){return this.getExtensionRoute("reset/call")},e.prototype.getExtensionRoute=function(t){return this.baseRoute+"/"+t},e}(Yt);!function(t){t.USERNAME="username",t.PASSWORD="password"}(re||(re={}));var oe,ie=function(t,e,r){var n;void 0===r&&(r=te.DEFAULT_NAME),this.username=t,this.password=e,this.providerName=r,this.providerType=te.TYPE,this.providerCapabilities=new Nt(!1),this.material=((n={})[re.USERNAME]=this.username,n[re.PASSWORD]=this.password,n)};!function(t){t.Normal="normal",t.Server="server",t.Unknown="unknown"}(oe||(oe={}));var se,ue=oe,ae=function(){function t(t){this.suiteName=t,this.storage={}}return t.prototype.get=function(t){return this.storage[this.suiteName+"."+t]},t.prototype.set=function(t,e){this.storage[this.suiteName+"."+t]=e},t.prototype.remove=function(t){delete this.storage[this.suiteName+"."+t]},t}(),ce=function(){};!function(t){t[t.AUTH_EVENT=0]="AUTH_EVENT"}(se||(se={}));var he=function(){function t(t,e,r){this.serviceField="service",this.argumentsField="arguments",this.requestClient=t,this.serviceRoutes=e,this.serviceName=r,this.serviceBinders=[],this.allocatedStreams=[]}return t.prototype.callFunction=function(t,e,r){return this.requestClient.doAuthenticatedRequestWithDecoder(this.getCallServiceFunctionRequest(t,e),r)},t.prototype.streamFunction=function(t,e,r){var n=this;return this.requestClient.openAuthenticatedStreamWithDecoder(this.getStreamServiceFunctionRequest(t,e),r).then((function(t){return n.allocatedStreams.push(t),t}))},t.prototype.bind=function(t){this.serviceBinders.push(t)},t.prototype.onRebindEvent=function(t){switch(t.type){case se.AUTH_EVENT:t.event.kind===n.ActiveUserChanged&&this.closeAllocatedStreams()}this.serviceBinders.forEach((function(e){e.onRebindEvent(t)}))},t.prototype.getStreamServiceFunctionRequest=function(t,e){var r={name:t};void 0!==this.serviceName&&(r[this.serviceField]=this.serviceName),r[this.argumentsField]=e;var n=new N.Builder;return n.withMethod(T.GET).withPath(this.serviceRoutes.functionCallRoute+"?stitch_request="+encodeURIComponent(J(o.a.stringify(r)))),n.build()},t.prototype.getCallServiceFunctionRequest=function(t,e){var r={name:t};void 0!==this.serviceName&&(r[this.serviceField]=this.serviceName),r[this.argumentsField]=e;var n=new U.Builder;return n.withMethod(T.POST).withPath(this.serviceRoutes.functionCallRoute),n.withDocument(r),n.build()},t.prototype.closeAllocatedStreams=function(){this.allocatedStreams.forEach((function(t){t.isOpen()&&t.close()})),this.allocatedStreams=[]},t}(),de=function(){function t(t,e){this.functionService=new he(t,e.serviceRoutes)}return t.prototype.callFunction=function(t,e,r){return this.functionService.callFunction(t,e,r)},t}(),fe=function(t){var e="function"===typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},pe=function(){function t(t){this.reconnecter=t,this.closed=!1,this.events=[],this.listeners=[],this.lastErr=void 0}return t.prototype.isOpen=function(){return!this.closed},t.prototype.addListener=function(t){var e=this;this.closed?setTimeout((function(){return t.onEvent(new B(j.ERROR_EVENT_NAME,"stream closed"))}),0):void 0===this.lastErr?(this.listeners.push(t),this.poll()):setTimeout((function(){return t.onEvent(new B(j.ERROR_EVENT_NAME,e.lastErr))}),0)},t.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);-1!==e&&this.listeners.splice(e,1)},t.prototype.nextEvent=function(){var t=this;return this.closed?Promise.reject(new B(j.ERROR_EVENT_NAME,"stream closed")):void 0!==this.lastErr?Promise.reject(new B(j.ERROR_EVENT_NAME,this.lastErr)):new Promise((function(e,r){t.listenOnce({onEvent:function(t){e(t)}})}))},t.prototype.close=function(){this.closed||(this.closed=!0,this.afterClose())},t.prototype.reconnect=function(e){var r=this;this.reconnecter?this.reconnecter().then((function(t){r.onReconnect(t)})).catch((function(n){if(!(n instanceof h)||!(n instanceof l))return r.closed=!0,r.events.push(new B(j.ERROR_EVENT_NAME,"stream closed: "+e)),void r.poll();setTimeout((function(){return r.reconnect(n)}),t.RETRY_TIMEOUT_MILLIS)})):this.closed||(this.closed=!0,this.events.push(new B(j.ERROR_EVENT_NAME,"stream closed: "+e)),this.poll())},t.prototype.poll=function(){for(var t,e;0!==this.events.length;){var r=this.events.pop();try{for(var n=fe(this.listeners),o=n.next();!o.done;o=n.next()){var i=o.value;i.onEvent&&i.onEvent(r)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}}},t.prototype.listenOnce=function(t){var e=this;if(this.closed)setTimeout((function(){return t.onEvent(new B(j.ERROR_EVENT_NAME,"stream closed"))}),0);else if(void 0===this.lastErr){var r={onEvent:function(n){e.removeListener(r),t.onEvent(n)}};this.addListener(r)}else setTimeout((function(){return t.onEvent(new B(j.ERROR_EVENT_NAME,e.lastErr))}),0)},t.RETRY_TIMEOUT_MILLIS=5e3,t}(),le=function(t,e,r,n){this.method=t,this.url=e,this.headers=r,this.body=n};!function(t){var e=function(){function e(t){t&&(this.method=t.method,this.url=t.url,this.headers=t.headers,this.body=t.body)}return e.prototype.withMethod=function(t){return this.method=t,this},e.prototype.withUrl=function(t){return this.url=t,this},e.prototype.withHeaders=function(t){return this.headers=t,this},e.prototype.withBody=function(t){return this.body=t,this},e.prototype.build=function(){if(void 0===this.method)throw new Error("must set method");if(void 0===this.url)throw new Error("must set non-empty url");return new t(this.method,this.url,void 0===this.headers?{}:this.headers,this.body)},e}();t.Builder=e}(le||(le={}));var ve=function(t,e,r){var n=this;this.statusCode=e,this.body=r,this.headers={},Object.keys(t).map((function(e,r){n.headers[e.toLocaleLowerCase()]=t[e]}))},ye="/api/client/v2.0";function ge(t){return ye+"/app/"+t}function Ae(t){return ge(t)+"/functions/call"}function me(t,e){return ge(t)+"/auth/providers/"+e}function Ee(t,e){return me(t,e)+"/login"}var we,Re=function(){function t(t){var e=this;this.baseAuthRoute=ye+"/auth",this.sessionRoute=e.baseAuthRoute+"/session",this.profileRoute=e.baseAuthRoute+"/profile",this.clientAppId=t}return t.prototype.getAuthProviderRoute=function(t){return me(this.clientAppId,t)},t.prototype.getAuthProviderLoginRoute=function(t){return Ee(this.clientAppId,t)},t.prototype.getAuthProviderLinkRoute=function(t){return function(t,e){return Ee(t,e)+"?link=true"}(this.clientAppId,t)},t.prototype.getAuthProviderExtensionRoute=function(t,e){return this.getAuthProviderRoute(t)+"/"+e},t}();!function(t){t.DEPLOYMENT_MODEL="deployment_model",t.LOCATION="location",t.HOSTNAME="hostname"}(we||(we={}));var _e=function(){function t(t,e,r){this.deploymentModel=t,this.location=e,this.hostname=r}return t.fromJSON=function(e){return new t(e[we.DEPLOYMENT_MODEL],e[we.LOCATION],e[we.HOSTNAME])},t.prototype.toJSON=function(){var t;return(t={})[we.DEPLOYMENT_MODEL]=this.deploymentModel,t[we.LOCATION]=this.location,t[we.HOSTNAME]=this.hostname,t},t}();var Ie=function(){function t(t,e){this.baseUrl=t,this.transport=e}return t.prototype.doRequestToURL=function(t,e){return this.transport.roundTrip(this.buildRequest(t,e)).catch((function(t){throw new l(t,c.TRANSPORT_ERROR)})).then((function(t){return(e=t).statusCode>=200&&e.statusCode<300?e:I(e);var e}))},t.prototype.doStreamRequestToURL=function(t,e,r,n){return void 0===r&&(r=!0),this.transport.stream(this.buildRequest(t,e),r,n).catch((function(t){if(t instanceof h)throw t;throw new l(t,c.TRANSPORT_ERROR)}))},t.prototype.buildRequest=function(t,e){return(new le.Builder).withMethod(t.method).withUrl(""+e+t.path).withHeaders(t.headers).withBody(t.body).build()},t}(),Te=function(t){this.clientAppId=t,this.functionCallRoute=Ae(t)},be=function(t){this.clientAppId=t,this.authRoutes=new Re(t),this.serviceRoutes=new Te(t),this.appMetadataRoute=function(t){return ge(t)+"/location"}(t),this.functionCallRoute=Ae(t)},Oe=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ne=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function u(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){t.done?o(t.value):new r((function(e){e(t.value)})).then(s,u)}a((n=n.apply(t,e||[])).next())}))},Pe=function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Ue=function(t){function e(e,r,n){var o=t.call(this,r,n)||this;return o.clientAppId=e,o.routes=new be(e),o}return Oe(e,t),e.prototype.doRequest=function(e){var r=this;return this.initAppMetadata().then((function(n){return t.prototype.doRequestToURL.call(r,e,n.hostname)}))},e.prototype.doStreamRequest=function(e,r,n){var o=this;return void 0===r&&(r=!0),this.initAppMetadata().then((function(i){return t.prototype.doStreamRequestToURL.call(o,e,i.hostname,r,n)}))},e.prototype.getBaseURL=function(){return Ne(this,void 0,void 0,(function(){return Pe(this,(function(t){return[2,this.initAppMetadata().then((function(t){return t.hostname}))]}))}))},e.prototype.initAppMetadata=function(){var e=this;if(this.appMetadata)return Promise.resolve(this.appMetadata);var r=(new b.Builder).withMethod(T.GET).withPath(this.routes.appMetadataRoute).build();return t.prototype.doRequestToURL.call(this,r,this.baseUrl).then((function(t){return e.appMetadata=_e.fromJSON(o.a.parse(t.body)),e.appMetadata}))},e}(Ie),Se=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ce=(function(t){function e(e,r){return t.call(this,e,r)||this}Se(e,t),e.prototype.doRequest=function(e){return t.prototype.doRequestToURL.call(this,e,this.baseUrl)},e.prototype.doStreamRequest=function(e,r,n){return void 0===r&&(r=!0),t.prototype.doStreamRequestToURL.call(this,e,this.baseUrl,r,n)},e.prototype.getBaseURL=function(){return Promise.resolve(this.baseUrl)}}(Ie),function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),De=function(t){function e(e){var r=t.call(this)||this;return r.type=se.AUTH_EVENT,r.event=e,r}return Ce(e,t),e}(ce),ke=function(){function t(t,e,r,n){this.baseUrl=t,this.storage=e,this.dataDirectory=r,this.transport=n}return t.prototype.builder=function(){return new t.Builder(this)},t}();!function(t){var e=function(){function e(t){t&&(this.baseUrl=t.baseUrl,this.storage=t.storage,this.dataDirectory=t.dataDirectory,this.transport=t.transport)}return e.prototype.withBaseUrl=function(t){return this.baseUrl=t,this},e.prototype.withStorage=function(t){return this.storage=t,this},e.prototype.withDataDirectory=function(t){return this.dataDirectory=t,this},e.prototype.withTransport=function(t){return this.transport=t,this},e.prototype.build=function(){return new t(this.baseUrl,this.storage,this.dataDirectory,this.transport)},e}();t.Builder=e}(ke||(ke={}));var Le=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Me=function(t){function e(e,r,n){var o=t.call(this,e.baseUrl,e.storage,e.dataDirectory,e.transport)||this;return o.localAppVersion=n,o.localAppName=r,o}return Le(e,t),e.prototype.builder=function(){return new e.Builder(this)},e}(ke);!function(t){var e=function(e){function r(t){var r=e.call(this,t)||this;return t&&(r.localAppVersion=t.localAppVersion,r.localAppName=t.localAppName),r}return Le(r,e),r.prototype.withLocalAppName=function(t){return this.localAppName=t,this},r.prototype.withLocalAppVersion=function(t){return this.localAppVersion=t,this},r.prototype.build=function(){var r=e.prototype.build.call(this);return new t(r,this.localAppName,this.localAppVersion)},r}(ke.Builder);t.Builder=e}(Me||(Me={}));var Fe,xe=function(t,e,r,n){this.clientAppId=t,this.dataDirectory=e,this.localAppName=r,this.localAppVersion=n},Be=function(t,e,r){void 0===e&&(e=Dt.DEFAULT_NAME),void 0===r&&(r=Dt.TYPE),this.redirectUrl=t,this.providerName=e,this.providerType=r},je=function(t,e,r){void 0===e&&(e=xt.DEFAULT_NAME),void 0===r&&(r=xt.TYPE),this.redirectUrl=t,this.providerName=e,this.providerType=r},qe=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ve=function(t){function e(e,r){return t.call(this,e,r)||this}return qe(e,t),e.prototype.createApiKey=function(e){return t.prototype.createApiKey.call(this,e)},e.prototype.fetchApiKey=function(e){return t.prototype.fetchApiKey.call(this,e)},e.prototype.fetchApiKeys=function(){return t.prototype.fetchApiKeys.call(this)},e.prototype.deleteApiKey=function(e){return t.prototype.deleteApiKey.call(this,e)},e.prototype.enableApiKey=function(e){return t.prototype.enableApiKey.call(this,e)},e.prototype.disableApiKey=function(e){return t.prototype.disableApiKey.call(this,e)},e}(Xt);(Fe||(Fe={})).factory=new(function(){function t(){}return t.prototype.getClient=function(t,e,r){return new Ve(t,r)},t}());var We,Ye=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ke=function(t){function e(e,r){return t.call(this,te.DEFAULT_NAME,e,r)||this}return Ye(e,t),e.prototype.registerWithEmail=function(e,r){return t.prototype.registerWithEmailInternal.call(this,e,r)},e.prototype.confirmUser=function(e,r){return t.prototype.confirmUserInternal.call(this,e,r)},e.prototype.resendConfirmationEmail=function(e){return t.prototype.resendConfirmationEmailInternal.call(this,e)},e.prototype.resetPassword=function(e,r,n){return t.prototype.resetPasswordInternal.call(this,e,r,n)},e.prototype.sendResetPasswordEmail=function(e){return t.prototype.sendResetPasswordEmailInternal.call(this,e)},e.prototype.callResetPasswordFunction=function(e,r,n){return t.prototype.callResetPasswordFunctionInternal.call(this,e,r,n)},e}(ne);(We||(We={})).factory=new(function(){function t(){}return t.prototype.getClient=function(t,e,r){return new Ke(e,r)},t}());var He,Ge=r("K64n"),Je=function(){function t(){}return t.prototype.roundTrip=function(t){var e=Object(Ge.fetch)(t.url,{body:t.body,headers:t.headers,method:t.method,mode:"cors"}),r=e.then((function(t){return t.text()}));return Promise.all([e,r]).then((function(t){var e=t[0],r=t[1],n={};return e.headers.forEach((function(t,e){n[e]=t})),new ve(n,e.status,r)}))},t.prototype.stream=function(t,e,r){throw void 0===e&&(e=!0),new x(C.StreamingNotSupported)},t}(),ze=function(){function t(t){this.suiteName=t}return t.prototype.get=function(t){return localStorage.getItem(this.getKey(t))},t.prototype.set=function(t,e){localStorage.setItem(this.getKey(t),e)},t.prototype.remove=function(t){localStorage.removeItem(this.getKey(t))},t.prototype.getKey=function(t){return"__stitch.client."+this.suiteName+"."+t},t}(),Xe=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ze=function(t){function e(e,r,n,o){var i=t.call(this,o)||this;return i.evtSrc=e,i.onOpenError=n,i.openedOnce=!1,i.evtSrc.onopen=function(t){r(i),i.openedOnce=!0},i.reset(),i}return Xe(e,t),e.prototype.open=function(){if(this.closed)throw new x(C.StreamClosed)},e.prototype.afterClose=function(){this.evtSrc.close()},e.prototype.onReconnect=function(t){this.evtSrc=t.evtSrc,this.reset(),this.events=t.events.concat(this.events)},e.prototype.reset=function(){var t=this;this.evtSrc.onmessage=function(e){t.events.push(new B(B.MESSAGE_EVENT,e.data)),t.poll()},this.evtSrc.onerror=function(e){return e instanceof MessageEvent?(t.lastErr=e.data,t.events.push(new B(j.ERROR_EVENT_NAME,t.lastErr)),t.close(),void t.poll()):t.openedOnce?(t.evtSrc.close(),void t.reconnect()):(t.close(),void t.onOpenError(new Error("event source failed to open and will not reconnect; check network log for more details")))}},e}(pe),$e=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qe=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},tr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $e(e,t),e.prototype.stream=function(t,e,r){void 0===e&&(e=!0);var n=Qe({},t.headers);return n[R.ACCEPT]=w.TEXT_EVENT_STREAM,n[R.CONTENT_TYPE]=w.TEXT_EVENT_STREAM,Object(Ge.fetch)(t.url+"&stitch_validate=true",{body:t.body,headers:n,method:t.method,mode:"cors"}).then((function(e){var n={};return e.headers.forEach((function(t,e){n[e]=t})),e.status<200||e.status>=300?e.text().then((function(t){return I(new ve(n,e.status,t))})):new Promise((function(e,n){return new Ze(new EventSource(t.url),(function(t){return e(t)}),(function(t){return n(t)}),r?function(){return r().then((function(t){return t}))}:void 0)}))}))},e}(Je),er=function(){function t(t){this.proxy=t}return t.prototype.callFunction=function(t,e,r){return this.proxy.callFunction(t,e,r)},t.prototype.streamFunction=function(t,e,r){return this.proxy.streamFunction(t,e,r)},t}(),rr=r("SjWX");!function(t){t.StitchError="_stitch_error",t.State="_stitch_state",t.UserAuth="_stitch_ua",t.LinkUser="_stitch_link_user",t.StitchLink="_stitch_link",t.ClientAppId="_stitch_client_app_id"}(He||(He={}));var nr,or=He;!function(t){t.ProviderName="_stitch_redirect_provider_name",t.ProviderType="_stitch_redirect_provider_type",t.State="_stitch_redirect_state"}(nr||(nr={}));var ir=nr,sr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ur=function(t){function e(e){return t.call(this,e)||this}return sr(e,t),e}(h),ar=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cr=function(t){function e(e,r,n,o,i,s,u,a){var c=t.call(this,e,r,n,o,i,s,a)||this;return c.auth=u,c}return ar(e,t),e.prototype.linkWithCredential=function(t){return this.auth.linkWithCredential(this,t)},e.prototype.linkUserWithRedirect=function(t){return this.auth.linkWithRedirectInternal(this,t)},e}(W),hr=function(){function t(t){this.auth=t}return t.prototype.makeUser=function(t,e,r,n,o,i,s){return new cr(t,e,r,n,o,i,this.auth,s)},t}(),dr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fr=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},pr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",lr=function(t){function e(e,r,n,o,i){void 0===i&&(i=window);var s=t.call(this,e,r,n)||this;return s.browserAuthRoutes=r,s.authStorage=n,s.appInfo=o,s.jsdomWindow=i,s.listeners=new Set,s.synchronousListeners=new Set,s}return dr(e,t),Object.defineProperty(e.prototype,"userFactory",{get:function(){return new hr(this)},enumerable:!0,configurable:!0}),e.prototype.getProviderClient=function(t,e){return function(t){return void 0!==t.getClient}(t)?t.getClient(this,this.requestClient,this.authRoutes):t.getNamedClient(e,this.requestClient,this.authRoutes)},e.prototype.loginWithCredential=function(e){return t.prototype.loginWithCredentialInternal.call(this,e)},e.prototype.loginWithRedirect=function(t){var e=this,r=this.prepareRedirect(t),n=r.redirectUrl,o=r.state;this.requestClient.getBaseURL().then((function(r){e.jsdomWindow.location.replace(r+e.browserAuthRoutes.getAuthProviderRedirectRoute(t,n,o,e.deviceInfo))}))},e.prototype.linkWithRedirectInternal=function(t,r){var n=this;if(void 0!==this.user&&t.id!==this.user.id)return Promise.reject(new x(C.UserNoLongerValid));var o=this.prepareRedirect(r),i=o.redirectUrl,s=o.state;return this.requestClient.getBaseURL().then((function(t){var o=t+n.browserAuthRoutes.getAuthProviderLinkRedirectRoute(r,i,s,n.deviceInfo);return(e.injectedFetch?e.injectedFetch:fetch)(new Request(o,{credentials:"include",headers:{Authorization:"Bearer "+n.authInfo.accessToken},mode:"cors"}))})).then((function(t){n.jsdomWindow.location.replace(t.headers.get("X-Stitch-Location"))}))},e.prototype.hasRedirectResult=function(){var t=!1;try{return t=this.parseRedirect().isValid}catch(e){return!1}finally{t||this.cleanupRedirect()}},e.prototype.handleRedirectResult=function(){try{var t=this.authStorage.get(ir.ProviderName),e=this.authStorage.get(ir.ProviderType),r=this.parseRedirect();return this.loginWithCredentialInternal(new K(this.processRedirectResult(r),e,t,r.asLink)).then((function(t){return t}))}catch(n){return Promise.reject(n)}},e.prototype.linkWithCredential=function(e,r){return t.prototype.linkUserWithCredentialInternal.call(this,e,r)},e.prototype.logout=function(){return arguments.length>0?Promise.reject(new x(C.UnexpectedArguments)):t.prototype.logoutInternal.call(this)},e.prototype.logoutUserWithId=function(e){return t.prototype.logoutUserWithIdInternal.call(this,e)},e.prototype.removeUser=function(){return arguments.length>0?Promise.reject(new x(C.UnexpectedArguments)):t.prototype.removeUserInternal.call(this)},e.prototype.removeUserWithId=function(e){return t.prototype.removeUserWithIdInternal.call(this,e)},Object.defineProperty(e.prototype,"deviceInfo",{get:function(){var t={};this.hasDeviceId&&(t[Ot.DEVICE_ID]=this.deviceId),void 0!==this.appInfo.localAppName&&(t[Ot.APP_ID]=this.appInfo.localAppName),void 0!==this.appInfo.localAppVersion&&(t[Ot.APP_VERSION]=this.appInfo.localAppVersion);var e=Object(rr.detect)();return e?(t[Ot.PLATFORM]=e.name,t[Ot.PLATFORM_VERSION]=e.version):(t[Ot.PLATFORM]="web",t[Ot.PLATFORM_VERSION]="0.0.0"),t[Ot.SDK_VERSION]="4.8.0",t},enumerable:!0,configurable:!0}),e.prototype.addAuthListener=function(t){this.listeners.add(t),this.onAuthEvent(t),this.dispatchAuthEvent({kind:n.ListenerRegistered})},e.prototype.addSynchronousAuthListener=function(t){this.listeners.add(t),this.onAuthEvent(t),this.dispatchAuthEvent({kind:n.ListenerRegistered})},e.prototype.removeAuthListener=function(t){this.listeners.delete(t)},e.prototype.onAuthEvent=function(t){var e=this;if(t)new Promise((function(r){t.onAuthEvent&&t.onAuthEvent(e),r(void 0)}));else this.listeners.forEach((function(t){e.onAuthEvent(t)}))},e.prototype.dispatchAuthEvent=function(t){var e=this;switch(t.kind){case n.ActiveUserChanged:this.dispatchBlockToListeners((function(r){r.onActiveUserChanged&&r.onActiveUserChanged(e,t.currentActiveUser,t.previousActiveUser)}));break;case n.ListenerRegistered:this.dispatchBlockToListeners((function(t){t.onListenerRegistered&&t.onListenerRegistered(e)}));break;case n.UserAdded:this.dispatchBlockToListeners((function(r){r.onUserAdded&&r.onUserAdded(e,t.addedUser)}));break;case n.UserLinked:this.dispatchBlockToListeners((function(r){r.onUserLinked&&r.onUserLinked(e,t.linkedUser)}));break;case n.UserLoggedIn:this.dispatchBlockToListeners((function(r){r.onUserLoggedIn&&r.onUserLoggedIn(e,t.loggedInUser)}));break;case n.UserLoggedOut:this.dispatchBlockToListeners((function(r){r.onUserLoggedOut&&r.onUserLoggedOut(e,t.loggedOutUser)}));break;case n.UserRemoved:this.dispatchBlockToListeners((function(r){r.onUserRemoved&&r.onUserRemoved(e,t.removedUser)}));break;default:return this.assertNever(t)}},e.prototype.refreshCustomData=function(){return this.refreshAccessToken()},e.prototype.assertNever=function(t){throw new Error("unexpected object: "+t)},e.prototype.dispatchBlockToListeners=function(t){this.synchronousListeners.forEach(t),this.listeners.forEach((function(e){new Promise((function(r){t(e),r(void 0)}))}))},e.prototype.cleanupRedirect=function(){this.jsdomWindow.history.replaceState(null,"",this.pageRootUrl()),this.authStorage.remove(ir.State),this.authStorage.remove(ir.ProviderName),this.authStorage.remove(ir.ProviderType)},e.prototype.parseRedirect=function(){if("undefined"===typeof this.jsdomWindow)throw new ur("running in a non-browser environment");if(!this.jsdomWindow.location||!this.jsdomWindow.location.hash)throw new ur("window location hash was undefined");var t=this.authStorage.get(ir.State);return function(t,e,r){var n=t.split("&"),o=new vr;return n.forEach((function(t){var n=t.split("=");switch(decodeURIComponent(n[0])){case or.StitchError:o.lastError=decodeURIComponent(n[1]);break;case or.UserAuth:try{o.authInfo=function(t){var e=t.split("$");if(4!==e.length)throw new ur("invalid user auth data provided while marshalling user authentication data: "+t);var r=fr(e,4),n=r[0],o=r[1],s=r[2],u=r[3];return new i(s,u,n,o)}(decodeURIComponent(n[1]))}catch(a){o.lastError=a}break;case or.StitchLink:"ok"===n[1]&&(o.asLink=!0);break;case or.State:var s=decodeURIComponent(n[1]);e===s&&(o.stateValid=!0);break;case or.ClientAppId:var u=decodeURIComponent(n[1]);r===u&&(o.clientAppIdValid=!0)}})),o}(this.jsdomWindow.location.hash.substring(1),t,this.appInfo.clientAppId)},e.prototype.processRedirectResult=function(t){try{if(!t.isValid)throw new ur("invalid redirect result");if(t.lastError)throw new ur("error handling redirect: "+t.lastError);if(!t.authInfo)throw new ur("no user auth value was found: it could not be decoded from fragment")}catch(e){throw e}finally{this.cleanupRedirect()}return t.authInfo},e.prototype.prepareRedirect=function(t){this.authStorage.set(ir.ProviderName,t.providerName),this.authStorage.set(ir.ProviderType,t.providerType);var e=t.redirectUrl;void 0===e&&(e=this.pageRootUrl());var r=function(){for(var t="",e=0;e<64;++e)t+=pr.charAt(Math.floor(Math.random()*pr.length));return t}();return this.authStorage.set(ir.State,r),{redirectUrl:e,state:r}},e.prototype.pageRootUrl=function(){return[this.jsdomWindow.location.protocol,"//",this.jsdomWindow.location.host,this.jsdomWindow.location.pathname].join("")},e}(Tt);var vr=function(){function t(){this.stateValid=!1,this.clientAppIdValid=!1,this.asLink=!1}return Object.defineProperty(t.prototype,"isValid",{get:function(){return this.stateValid&&this.clientAppIdValid},enumerable:!0,configurable:!0}),t}();var yr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gr=function(t){function e(e){return t.call(this,e)||this}return yr(e,t),e.prototype.getAuthProviderRedirectRoute=function(t,e,r,n){return this.getAuthProviderLoginRoute(t.providerName)+"?redirect="+encodeURI(e)+"&state="+r+"&device="+this.uriEncodeObject(n)},e.prototype.getAuthProviderLinkRedirectRoute=function(t,e,r,n){return this.getAuthProviderLoginRoute(t.providerName)+"?redirect="+encodeURI(e)+"&state="+r+"&device="+this.uriEncodeObject(n)+"&link=true&providerRedirectHeader=true"},e.prototype.uriEncodeObject=function(t){return encodeURIComponent(J(JSON.stringify(t)))},e}(Re),Ar=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mr=function(t){function e(e){var r=t.call(this,e)||this;return r.authRoutes=new gr(e),r}return Ar(e,t),e}(be),Er=function(){function t(t,e){this.info=new xe(t,e.dataDirectory,e.localAppName,e.localAppVersion),this.routes=new mr(this.info.clientAppId);var r=new Ue(t,e.baseUrl,e.transport);this.auth=new lr(r,this.routes.authRoutes,e.storage,this.info),this.coreClient=new de(this.auth,this.routes),this.serviceClients=[],this.auth.addSynchronousAuthListener(this)}return t.prototype.getServiceClient=function(t,e){if(function(t){return void 0!==t.getClient}(t)){var r=new he(this.auth,this.routes.serviceRoutes,"");return this.bindServiceClient(r),t.getClient(r,this.info)}r=new he(this.auth,this.routes.serviceRoutes,e);return this.bindServiceClient(r),t.getNamedClient(r,this.info)},t.prototype.getGeneralServiceClient=function(t){var e=new he(this.auth,this.routes.serviceRoutes,t);return this.bindServiceClient(e),new er(e)},t.prototype.callFunction=function(t,e){return this.coreClient.callFunction(t,e)},t.prototype.onActiveUserChanged=function(t,e,r){this.onRebindEvent(new De({currentActiveUser:e,kind:n.ActiveUserChanged,previousActiveUser:r}))},t.prototype.bindServiceClient=function(t){this.serviceClients.push(t)},t.prototype.onRebindEvent=function(t){this.serviceClients.forEach((function(e){e.onRebindEvent(t)}))},t}();var wr,Rr={},_r=function(){function t(){}return Object.defineProperty(t,"defaultAppClient",{get:function(){if(void 0===t.defaultClientAppId)throw new Error("default app client has not yet been initialized/set");return Rr[t.defaultClientAppId]},enumerable:!0,configurable:!0}),t.getAppClient=function(t){if(void 0===Rr[t])throw new Error("client for app '"+t+"' has not yet been initialized");return Rr[t]},t.hasAppClient=function(t){return void 0!==Rr[t]},t.initializeDefaultAppClient=function(e,r){if(void 0===r&&(r=(new Me.Builder).build()),void 0===e||""===e)throw new Error("clientAppId must be set to a non-empty string");if(void 0!==t.defaultClientAppId)throw new Error("default app can only be set once; currently set to '"+t.defaultClientAppId+"'");var n=t.initializeAppClient(e,r);return t.defaultClientAppId=e,n},t.initializeAppClient=function(e,r){if(void 0===r&&(r=(new Me.Builder).build()),void 0===e||""===e)throw new Error("clientAppId must be set to a non-empty string");if(void 0!==Rr[e])throw new Error("client for app '"+e+"' has already been initialized");var n=r.builder?r.builder():new Me.Builder(r);void 0===n.storage&&n.withStorage(new ze(e)),void 0===n.transport&&(window.EventSource?n.withTransport(new tr):n.withTransport(new Je)),void 0!==n.baseUrl&&""!==n.baseUrl||n.withBaseUrl("https://stitch.mongodb.com"),void 0!==n.localAppName&&""!==n.localAppName||n.withLocalAppName(t.localAppName),void 0!==n.localAppVersion&&""!==n.localAppVersion||n.withLocalAppVersion(t.localAppVersion);var o=new Er(e,n.build());return Rr[e]=o,o},t.clearApps=function(){Rr={}},t}(),Ir=function(){function t(t,e,r,n){this.command=t,this.args=e,this.service=r,n&&(this.collectionDecoder=new(function(){function t(){}return t.prototype.decode=function(t){return t instanceof Array?t.map((function(t){return n.decode(t)})):[n.decode(t)]},t}()))}return t.prototype.iterator=function(){return this.executeRead().then((function(t){return t[Symbol.iterator]()}))},t.prototype.first=function(){return this.executeRead().then((function(t){return t[0]}))},t.prototype.toArray=function(){return this.executeRead()},t.prototype.asArray=function(){return this.toArray()},t.prototype.executeRead=function(){return this.service.callFunction(this.command,[this.args],this.collectionDecoder)},t}();function Tr(t){switch(t){case"insert":return wr.Insert;case"delete":return wr.Delete;case"replace":return wr.Replace;case"update":return wr.Update;default:return wr.Unknown}}!function(t){t.Insert="insert",t.Delete="delete",t.Replace="replace",t.Update="update",t.Unknown="unknown"}(wr||(wr={}));var br,Or,Nr,Pr,Ur,Sr,Cr,Dr=function(t){var e={};t.forEach((function(t,r){e[r]=t})),this.insertedIds=e};!function(t){t.InsertedIds="insertedIds"}(br||(br={})),function(t){t.InsertedId="insertedId"}(Or||(Or={})),function(t){t.MatchedCount="matchedCount",t.ModifiedCount="modifiedCount",t.UpsertedId="upsertedId"}(Nr||(Nr={})),function(t){t.DeletedCount="deletedCount"}(Pr||(Pr={})),function(t){t.UpdatedFields="updatedFields",t.RemovedFields="removedFields"}(Ur||(Ur={})),function(t){t.Id="_id",t.OperationType="operationType",t.FullDocument="fullDocument",t.DocumentKey="documentKey",t.Namespace="ns",t.NamespaceDb="db",t.NamespaceColl="coll",t.UpdateDescription="updateDescription"}(Sr||(Sr={})),function(t){t.OperationType="ot",t.FullDocument="fd",t.DocumentKey="dk",t.UpdateDescription="ud",t.StitchDocumentVersion="sdv",t.StitchDocumentHash="sdh"}(Cr||(Cr={}));var kr=function(){function t(){}return t.prototype.decode=function(t){return new Dr(t[br.InsertedIds])},t}(),Lr=function(){function t(){}return t.prototype.decode=function(t){return{insertedId:t[Or.InsertedId]}},t}(),Mr=function(){function t(){}return t.prototype.decode=function(t){return{matchedCount:t[Nr.MatchedCount],modifiedCount:t[Nr.ModifiedCount],upsertedId:t[Nr.UpsertedId]}},t}(),Fr=function(){function t(){}return t.prototype.decode=function(t){return{deletedCount:t[Pr.DeletedCount]}},t}(),xr=function(){function t(){}return t.prototype.decode=function(t){return ot.keyPresent(Ur.UpdatedFields,t),ot.keyPresent(Ur.RemovedFields,t),{removedFields:t[Ur.RemovedFields],updatedFields:t[Ur.UpdatedFields]}},t}();function Br(t,e,r,n){var o,i;return o=e in t?Wr.updateDescriptionDecoder.decode(t[e]):void 0,r in t?(i=t[r],n&&(i=n.decode(i))):i=void 0,{updateDescription:o,fullDocument:i}}var jr,qr=function(){function t(t){this.decoder=t}return t.prototype.decode=function(t){ot.keyPresent(Sr.Id,t),ot.keyPresent(Sr.OperationType,t),ot.keyPresent(Sr.Namespace,t),ot.keyPresent(Sr.DocumentKey,t);var e=t[Sr.Namespace],r=Br(t,Sr.UpdateDescription,Sr.FullDocument,this.decoder),n=r.updateDescription,o=r.fullDocument;return{documentKey:t[Sr.DocumentKey],fullDocument:o,id:t[Sr.Id],namespace:{collection:e[Sr.NamespaceColl],database:e[Sr.NamespaceDb]},operationType:Tr(t[Sr.OperationType]),updateDescription:n}},t}(),Vr=function(){function t(t){this.decoder=t}return t.prototype.decode=function(t){ot.keyPresent(Cr.OperationType,t),ot.keyPresent(Cr.DocumentKey,t);var e,r,n=Br(t,Cr.UpdateDescription,Cr.FullDocument,this.decoder),o=n.updateDescription,i=n.fullDocument;return e=Cr.StitchDocumentVersion in t?t[Cr.StitchDocumentVersion]:void 0,r=Cr.StitchDocumentHash in t?t[Cr.StitchDocumentHash]:void 0,{documentKey:t[Cr.DocumentKey],fullDocument:i,operationType:Tr(t[Cr.OperationType]),stitchDocumentHash:r,stitchDocumentVersion:e,updateDescription:o}},t}(),Wr=function(){function t(){}return t.remoteInsertManyResultDecoder=new kr,t.remoteInsertOneResultDecoder=new Lr,t.remoteUpdateResultDecoder=new Mr,t.remoteDeleteResultDecoder=new Fr,t.updateDescriptionDecoder=new xr,t.ChangeEventDecoder=qr,t.CompactChangeEventDecoder=Vr,t}(),Yr=Wr,Kr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Hr=function(){function t(t,e,r,n){var o=this;this.name=t,this.databaseName=e,this.service=r,this.codec=n,this.namespace=this.databaseName+"."+this.name,this.baseOperationArgs={collection:o.name,database:o.databaseName}}return t.prototype.withCollectionType=function(e){return new t(this.name,this.databaseName,this.service,e)},t.prototype.find=function(t,e){void 0===t&&(t={});var r=Kr({},this.baseOperationArgs);return r.query=t,e&&(e.limit&&(r.limit=e.limit),e.projection&&(r.project=e.projection),e.sort&&(r.sort=e.sort)),new Ir("find",r,this.service,this.codec)},t.prototype.findOne=function(t,e){void 0===t&&(t={});var r=Kr({},this.baseOperationArgs);return r.query=t,e&&(e.projection&&(r.project=e.projection),e.sort&&(r.sort=e.sort)),this.service.callFunction("findOne",[r],this.codec)},t.prototype.findOneAndUpdate=function(t,e,r){var n=Kr({},this.baseOperationArgs);return n.filter=t,n.update=e,r&&(r.projection&&(n.projection=r.projection),r.sort&&(n.sort=r.sort),r.upsert&&(n.upsert=!0),r.returnNewDocument&&(n.returnNewDocument=!0)),this.service.callFunction("findOneAndUpdate",[n],this.codec)},t.prototype.findOneAndReplace=function(t,e,r){var n=Kr({},this.baseOperationArgs);return n.filter=t,n.update=e,r&&(r.projection&&(n.projection=r.projection),r.sort&&(n.sort=r.sort),r.upsert&&(n.upsert=!0),r.returnNewDocument&&(n.returnNewDocument=!0)),this.service.callFunction("findOneAndReplace",[n],this.codec)},t.prototype.findOneAndDelete=function(t,e){var r=Kr({},this.baseOperationArgs);return r.filter=t,e&&(e.projection&&(r.projection=e.projection),e.sort&&(r.sort=e.sort)),this.service.callFunction("findOneAndDelete",[r],this.codec)},t.prototype.aggregate=function(t){var e=Kr({},this.baseOperationArgs);return e.pipeline=t,new Ir("aggregate",e,this.service,this.codec)},t.prototype.count=function(t,e){void 0===t&&(t={});var r=Kr({},this.baseOperationArgs);return r.query=t,e&&e.limit&&(r.limit=e.limit),this.service.callFunction("count",[r])},t.prototype.insertOne=function(t){var e=Kr({},this.baseOperationArgs);return e.document=this.generateObjectIdIfMissing(this.codec?this.codec.encode(t):t),this.service.callFunction("insertOne",[e],Yr.remoteInsertOneResultDecoder)},t.prototype.insertMany=function(t){var e=this,r=Kr({},this.baseOperationArgs);return r.documents=t.map((function(t){return e.generateObjectIdIfMissing(e.codec?e.codec.encode(t):t)})),this.service.callFunction("insertMany",[r],Yr.remoteInsertManyResultDecoder)},t.prototype.deleteOne=function(t){return this.executeDelete(t,!1)},t.prototype.deleteMany=function(t){return this.executeDelete(t,!0)},t.prototype.updateOne=function(t,e,r){return this.executeUpdate(t,e,r,!1)},t.prototype.updateMany=function(t,e,r){return this.executeUpdate(t,e,r,!0)},t.prototype.watch=function(t){var e=Kr({},this.baseOperationArgs);return void 0!==t&&(t instanceof Array?0!==t.length&&(e.ids=t):t instanceof Object&&(e.filter=t)),e.useCompactEvents=!1,this.service.streamFunction("watch",[e],new Yr.ChangeEventDecoder(this.codec))},t.prototype.watchCompact=function(t){var e=Kr({},this.baseOperationArgs);return e.ids=t,e.useCompactEvents=!0,this.service.streamFunction("watch",[e],new Yr.CompactChangeEventDecoder(this.codec))},t.prototype.executeDelete=function(t,e){var r=Kr({},this.baseOperationArgs);return r.query=t,this.service.callFunction(e?"deleteMany":"deleteOne",[r],Yr.remoteDeleteResultDecoder)},t.prototype.executeUpdate=function(t,e,r,n){void 0===n&&(n=!1);var o=Kr({},this.baseOperationArgs);return o.query=t,o.update=e,r&&r.upsert&&(o.upsert=r.upsert),this.service.callFunction(n?"updateMany":"updateOne",[o],Yr.remoteUpdateResultDecoder)},t.prototype.generateObjectIdIfMissing=function(t){if(!t._id){var e=t;return e._id=new o.b.ObjectID,e}return t},t}(),Gr=function(){function t(t,e){this.name=t,this.service=e}return t.prototype.collection=function(t,e){return new Hr(t,this.name,this.service,e)},t}(),Jr=function(){function t(t){this.service=t}return t.prototype.db=function(t){return new Gr(t,this.service)},t}(),zr=function(){function t(t){this.proxy=t}return t.prototype.next=function(){return Promise.resolve(this.proxy.next().value)},t}(),Xr=function(){function t(t){this.proxy=t}return t.prototype.first=function(){return this.proxy.first()},t.prototype.toArray=function(){return this.proxy.toArray()},t.prototype.asArray=function(){return this.toArray()},t.prototype.iterator=function(){return this.proxy.iterator().then((function(t){return new zr(t)}))},t}(),Zr=function(){function t(t){this.proxy=t,this.namespace=this.proxy.namespace}return t.prototype.withCollectionType=function(e){return new t(this.proxy.withCollectionType(e))},t.prototype.count=function(t,e){return this.proxy.count(t,e)},t.prototype.find=function(t,e){return new Xr(this.proxy.find(t,e))},t.prototype.findOne=function(t,e){return this.proxy.findOne(t,e)},t.prototype.findOneAndUpdate=function(t,e,r){return this.proxy.findOneAndUpdate(t,e,r)},t.prototype.findOneAndReplace=function(t,e,r){return this.proxy.findOneAndReplace(t,e,r)},t.prototype.findOneAndDelete=function(t,e){return this.proxy.findOneAndDelete(t,e)},t.prototype.aggregate=function(t){return new Xr(this.proxy.aggregate(t))},t.prototype.insertOne=function(t){return this.proxy.insertOne(t)},t.prototype.insertMany=function(t){return this.proxy.insertMany(t)},t.prototype.deleteOne=function(t){return this.proxy.deleteOne(t)},t.prototype.deleteMany=function(t){return this.proxy.deleteMany(t)},t.prototype.updateOne=function(t,e,r){return this.proxy.updateOne(t,e,r)},t.prototype.updateMany=function(t,e,r){return this.proxy.updateMany(t,e,r)},t.prototype.watch=function(t){return this.proxy.watch(t)},t.prototype.watchCompact=function(t){return this.proxy.watchCompact(t)},t}(),$r=function(){function t(t){this.proxy=t,this.name=this.proxy.name}return t.prototype.collection=function(t,e){return new Zr(this.proxy.collection(t,e))},t}(),Qr=function(){function t(t){this.proxy=t}return t.prototype.db=function(t){return new $r(this.proxy.db(t))},t}();(jr||(jr={})).factory=new(function(){function t(){}return t.prototype.getNamedClient=function(t,e){return new Qr(new Jr(t))},t}())},"kVK+":function(t,e){e.read=function(t,e,r,n,o){var i,s,u=8*o-n-1,a=(1<<u)-1,c=a>>1,h=-7,d=r?o-1:0,f=r?-1:1,p=t[e+d];for(d+=f,i=p&(1<<-h)-1,p>>=-h,h+=u;h>0;i=256*i+t[e+d],d+=f,h-=8);for(s=i&(1<<-h)-1,i>>=-h,h+=n;h>0;s=256*s+t[e+d],d+=f,h-=8);if(0===i)i=1-c;else{if(i===a)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),i-=c}return(p?-1:1)*s*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var s,u,a,c=8*i-o-1,h=(1<<c)-1,d=h>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,l=n?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),(e+=s+d>=1?f/a:f*Math.pow(2,1-d))*a>=2&&(s++,a/=2),s+d>=h?(u=0,s=h):s+d>=1?(u=(e*a-1)*Math.pow(2,o),s+=d):(u=e*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;t[r+p]=255&u,p+=l,u/=256,o-=8);for(s=s<<o|u,c+=o;c>0;t[r+p]=255&s,p+=l,s/=256,c-=8);t[r+p-l]|=128*v}}}]);